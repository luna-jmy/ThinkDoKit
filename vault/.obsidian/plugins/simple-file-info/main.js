/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var He=Object.defineProperty;var fr=Object.getOwnPropertyDescriptor;var ar=Object.getOwnPropertyNames;var lr=Object.prototype.hasOwnProperty;var pr=(e,t)=>{for(var n in t)He(e,n,{get:t[n],enumerable:!0})},dr=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of ar(t))!lr.call(e,i)&&i!==n&&He(e,i,{get:()=>t[i],enumerable:!(r=fr(t,i))||r.enumerable});return e};var mr=e=>dr(He({},"__esModule",{value:!0}),e);var Oc={};pr(Oc,{default:()=>Ge});module.exports=mr(Oc);var ke=require("obsidian");var Be=require("obsidian");var j=class{constructor(t){if(gr(t))throw new Error("DataView: Passed buffer type is unsupported.");this.buffer=t,this.byteLength=this.buffer.length}getUint8(t){return this.buffer.readUInt8(t)}getUint16(t,n){return n?this.buffer.readUInt16LE(t):this.buffer.readUInt16BE(t)}getUint32(t,n){return n?this.buffer.readUInt32LE(t):this.buffer.readUInt32BE(t)}getInt32(t,n){return n?this.buffer.readInt32LE(t):this.buffer.readInt32BE(t)}};function gr(e){return typeof e!="object"||e.length===void 0||e.readUInt8===void 0||e.readUInt16LE===void 0||e.readUInt16BE===void 0||e.readUInt32LE===void 0||e.readUInt32BE===void 0||e.readInt32LE===void 0||e.readInt32BE===void 0}function Ze(e,t,n){try{return new DataView(e,t,n)}catch(r){return new j(e,t,n)}}function E(e,t,n){let r=[];for(let i=0;i<n&&t+i<e.byteLength;i++)r.push(e.getUint8(t+i));return X(r)}function Z(e,t){let n=[],r=0;for(;t+r<e.byteLength;){let i=e.getUint8(t+r);if(i===0)break;n.push(i),r++}return X(n)}function Ot(e,t,n){let r=[];for(let i=0;i<n&&t+i<e.byteLength;i+=2)r.push(e.getUint16(t+i));return r[r.length-1]===0&&r.pop(),X(r)}function me(e,t){let n=e.getUint8(t),r=E(e,t+1,n);return[n,r]}function X(e){return e.map(t=>String.fromCharCode(t)).join("")}function I(){for(let e=1;e<arguments.length;e++)for(let t in arguments[e])arguments[0][t]=arguments[e][t];return arguments[0]}function ge(e,t,n){let r=!1;Object.defineProperty(e,t,{get(){return r||(r=!0,Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n.apply(e),writable:!0})),e[t]},configurable:!0,enumerable:!0})}function Ee(e){if(typeof btoa!="undefined")return btoa(typeof e=="string"?e:Array.prototype.reduce.call(new Uint8Array(e),(t,n)=>t+String.fromCharCode(n),""));if(typeof Buffer!="undefined")return typeof Buffer.from!="undefined"?Buffer.from(e).toString("base64"):new Buffer(e).toString("base64")}function Dt(e){let t=e.substring(e.indexOf(",")+1);if(e.indexOf(";base64")!==-1)return typeof atob!="undefined"?Uint8Array.from(atob(t),r=>r.charCodeAt(0)).buffer:typeof Buffer=="undefined"?void 0:typeof Buffer.from!="undefined"?Buffer.from(t,"base64"):new Buffer(t,"base64");let n=decodeURIComponent(t);return typeof Buffer!="undefined"?typeof Buffer.from!="undefined"?Buffer.from(n):new Buffer(n):Uint8Array.from(n,r=>r.charCodeAt(0)).buffer}function Rt(e,t,n){return Xe(n,t-e.length)+e}function Lt(e,t){return parseInt(e.replace(".",""),t)/Math.pow(t,(e.split(".")[1]||"").length)}function Xe(e,t){return new Array(t+1).join(e)}var J=void 0,Ye=0;function Se(e,t,n,r="string"){if(t===Ye&&typeof DecompressionStream=="function"){let i=new DecompressionStream("deflate"),o=new Blob([e]).stream().pipeThrough(i);return r==="dataview"?new Response(o).arrayBuffer().then(s=>new DataView(s)):new Response(o).arrayBuffer().then(s=>new TextDecoder(n).decode(s))}return t!==void 0?Promise.reject(`Unknown compression method ${t}.`):e}var p={USE_FILE:!0,USE_JFIF:!0,USE_PNG_FILE:!0,USE_EXIF:!0,USE_IPTC:!0,USE_XMP:!0,USE_ICC:!0,USE_MPF:!0,USE_PHOTOSHOP:!0,USE_THUMBNAIL:!0,USE_TIFF:!0,USE_JPEG:!0,USE_PNG:!0,USE_HEIC:!0,USE_AVIF:!0,USE_WEBP:!0,USE_GIF:!0,USE_MAKER_NOTES:!0};function T(e){return e.map(t=>String.fromCharCode(t)).join("")}function re(e){if(e.length>=8){let t=T(e.slice(0,8));if(t==="ASCII\0\0\0")return T(e.slice(8));if(t==="JIS\0\0\0\0\0")return"[JIS encoded text]";if(t==="UNICODE\0")return"[Unicode encoded text]";if(t==="\0\0\0\0\0\0\0\0")return"[Undefined encoding]"}return"Undefined"}function q(e){return e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600}var D={BIG_ENDIAN:19789,LITTLE_ENDIAN:18761,getByteOrder:Er};function Er(e,t){if(e.getUint16(t)===18761)return 18761;if(e.getUint16(t)===19789)return 19789;throw new Error("Illegal byte order value. Faulty image.")}var ze={isTiffFile:Sr,findTiffOffsets:Ir};function Sr(e){return!!e&&e.byteLength>=4&&xr(e)}function xr(e){let r=e.getUint16(0)===D.LITTLE_ENDIAN;return e.getUint16(2,r)===42}function Ir(){return p.USE_EXIF?{hasAppMarkers:!0,tiffHeaderOffset:0}:{}}var We={isJpegFile:Mr,findJpegOffsets:Br},hr=2,Tr=65496,Mt=2,b=4,N=2,Fr=2,_r=10,Ar=18,Bt=33,Gt=79,kt=18,Pr=8,Ke="ICC_PROFILE\0",Wt=b+Ke.length,Cr=Wt+1,Ht="MPF\0",$t=65472,jt=65474,Nr=65476,yr=65499,Ur=65501,br=65498,vt=65504,$e=65505,wt=65506,Or=65517,Dr=65519,Rr=65534,Lr=65535,Zt="JFIF",Xt="Exif",Yt="http://ns.adobe.com/xap/1.0/\0",zt="http://ns.adobe.com/xmp/extension/\0",Kt="Photoshop 3.0";function Mr(e){return!!e&&e.byteLength>=hr&&e.getUint16(0)===Tr}function Br(e){let t=Mt,n,r,i,o,s,u,l,f,a;for(;t+b+5<=e.byteLength;){if(p.USE_FILE&&Gr(e,t))n=e.getUint16(t+N),r=t+N;else if(p.USE_FILE&&kr(e,t))n=e.getUint16(t+N),i=t+N;else if(p.USE_JFIF&&Xr(e,t))n=e.getUint16(t+N),o=t+Fr;else if(p.USE_EXIF&&Yr(e,t))n=e.getUint16(t+N),s=t+_r;else if(p.USE_XMP&&zr(e,t))l||(l=[]),n=e.getUint16(t+N),l.push(jr(t,n));else if(p.USE_XMP&&Wr(e,t))l||(l=[]),n=e.getUint16(t+N),l.push(vr(t,n));else if(p.USE_IPTC&&wr(e,t))n=e.getUint16(t+N),u=t+Ar;else if(p.USE_ICC&&Hr(e,t)){n=e.getUint16(t+N);let m=t+kt,g=n-(kt-N),S=e.getUint8(t+Wt),A=e.getUint8(t+Cr);f||(f=[]),f.push({offset:m,length:g,chunkNumber:S,chunksTotal:A})}else if(p.USE_MPF&&Zr(e,t))n=e.getUint16(t+N),a=t+Pr;else if(Jr(e,t))n=e.getUint16(t+N);else if(qr(e,t)){t++;continue}else break;t+=N+n}return{hasAppMarkers:t>Mt,fileDataOffset:r||i,jfifDataOffset:o,tiffHeaderOffset:s,iptcDataOffset:u,xmpChunks:l,iccChunks:f,mpfDataOffset:a}}function Gr(e,t){return e.getUint16(t)===$t}function kr(e,t){return e.getUint16(t)===jt}function Hr(e,t){let n=Ke.length;return e.getUint16(t)===wt&&E(e,t+b,n)===Ke}function Zr(e,t){let n=Ht.length;return e.getUint16(t)===wt&&E(e,t+b,n)===Ht}function Xr(e,t){let n=Zt.length;return e.getUint16(t)===vt&&E(e,t+b,n)===Zt&&e.getUint8(t+b+n)===0}function Yr(e,t){let n=Xt.length;return e.getUint16(t)===$e&&E(e,t+b,n)===Xt&&e.getUint8(t+b+n)===0}function zr(e,t){return e.getUint16(t)===$e&&Kr(e,t)}function Kr(e,t){let n=Yt.length;return E(e,t+b,n)===Yt}function Wr(e,t){return e.getUint16(t)===$e&&$r(e,t)}function $r(e,t){let n=zt.length;return E(e,t+b,n)===zt}function jr(e,t){return{dataOffset:e+Bt,length:t-(Bt-N)}}function vr(e,t){return{dataOffset:e+Gt,length:t-(Gt-N)}}function wr(e,t){let n=Kt.length;return e.getUint16(t)===Or&&E(e,t+b,n)===Kt&&e.getUint8(t+b+n)===0}function Jr(e,t){let n=e.getUint16(t);return n>=vt&&n<=Dr||n===Rr||n===$t||n===jt||n===Nr||n===yr||n===Ur||n===br}function qr(e,t){return e.getUint16(t)===Lr}var we={isPngFile:ei,findPngOffsets:ti},je=`\x89PNG\r

`,xe=4,O=4,v=0,L=xe,C=xe+O,ve="XML:com.adobe.xmp\0",Ie="tEXt",Y="iTXt",ie="zTXt",Je="pHYs",qe="tIME",Qr="eXIf",Vr="iCCP";function ei(e){return!!e&&E(e,0,je.length)===je}function ti(e,t){let r={hasAppMarkers:!1},i=je.length;for(;i+xe+O<=e.byteLength;){if(p.USE_PNG_FILE&&ni(e,i))r.hasAppMarkers=!0,r.pngHeaderOffset=i+C;else if(p.USE_XMP&&ri(e,i)){let o=ci(e,i);o!==void 0&&(r.hasAppMarkers=!0,r.xmpChunks=[{dataOffset:o,length:e.getUint32(i+v)-(o-(i+C))}])}else if(ii(e,i,t)){r.hasAppMarkers=!0;let o=E(e,i+L,O);r.pngTextChunks||(r.pngTextChunks=[]),r.pngTextChunks.push({length:e.getUint32(i+v),type:o,offset:i+C})}else if(oi(e,i))r.hasAppMarkers=!0,r.tiffHeaderOffset=i+C;else if(p.USE_ICC&&t&&si(e,i)){r.hasAppMarkers=!0;let o=e.getUint32(i+v),s=i+C,{profileName:u,compressionMethod:l,compressedProfileOffset:f}=fi(e,s);r.iccChunks||(r.iccChunks=[]),r.iccChunks.push({offset:f,length:o-(f-s),chunkNumber:1,chunksTotal:1,profileName:u,compressionMethod:l})}else ui(e,i)&&(r.hasAppMarkers=!0,r.pngChunkOffsets||(r.pngChunkOffsets=[]),r.pngChunkOffsets.push(i+v));i+=e.getUint32(i+v)+xe+O+4}return r}function ni(e,t){let n="IHDR";return E(e,t+L,O)===n}function ri(e,t){return E(e,t+L,O)===Y&&E(e,t+C,ve.length)===ve}function ii(e,t,n){let r=E(e,t+L,O);return r===Ie||r===Y||r===ie&&n}function oi(e,t){return E(e,t+L,O)===Qr}function si(e,t){return E(e,t+L,O)===Vr}function ui(e,t){let n=[Je,qe],r=E(e,t+L,O);return n.includes(r)}function ci(e,t){t+=C+ve.length+1+1;let i=0;for(;i<2&&t<e.byteLength;)e.getUint8(t)===0&&i++,t++;if(!(i<2))return t}function fi(e,t){let i=Z(e,t);t+=i.length+1;let o=e.getUint8(t);return t+=1,{profileName:i,compressionMethod:o,compressedProfileOffset:t}}function Jt(e,t){return e.getUint32(t+4)}function qt(e,t,n,r){let{offsets:o,sizes:s}=ai(t,n+3),u=e.getUint8(o.offsetSize)>>4;s.item.extent.extentOffset=u;let l=e.getUint8(o.lengthSize)&15;s.item.extent.extentLength=l;let f=e.getUint8(o.baseOffsetSize)>>4;s.item.baseOffset=f;let a=li(e,o.indexSize,t);s.item.extent.extentIndex=a!==void 0?a:0;let m=pi(e,o.itemCount,t);return{type:"iloc",items:di(e,t,o,s,u,l,a,m),length:r}}function ai(e,t){let n={item:{dataReferenceIndex:2,extentCount:2,extent:{}}};e<2?(n.itemCount=2,n.item.itemId=2):e===2&&(n.itemCount=4,n.item.itemId=4),e===1||e===2?n.item.constructionMethod=2:n.item.constructionMethod=0;let r={offsetSize:t,lengthSize:t,baseOffsetSize:t+1,indexSize:t+1};return r.itemCount=t+2,r.items=r.itemCount+n.itemCount,r.item={itemId:0},r.item.constructionMethod=r.item.itemId+n.item.itemId,r.item.dataReferenceIndex=r.item.constructionMethod+n.item.constructionMethod,{offsets:r,sizes:n}}function li(e,t,n){if(n===1||n===2)return e.getUint8(t)&15}function pi(e,t,n){if(n<2)return e.getUint16(t);if(n===2)return e.getUint32(t)}function di(e,t,n,r,i,o,s,u){if(u===void 0)return[];let l=[],f=n.items;for(let a=0;a<u;a++){let m={extents:[]};m.itemId=mi(e,f,t),f+=r.item.itemId,m.constructionMethod=t===1||t===2?e.getUint16(f)&15:void 0,f+=r.item.constructionMethod,m.dataReferenceIndex=e.getUint16(f),f+=r.item.dataReferenceIndex,m.baseOffset=he(e,f,r.item.baseOffset),f+=r.item.baseOffset,m.extentCount=e.getUint16(f),f+=r.item.extentCount;for(let g=0;g<m.extentCount;g++){let S={};S.extentIndex=gi(e,t,f,s),f+=r.item.extent.extentIndex,S.extentOffset=he(e,f,i),f+=r.item.extent.extentOffset,S.extentLength=he(e,f,o),f+=r.item.extent.extentLength,m.extents.push(S)}l.push(m)}return l}function mi(e,t,n){if(n<2)return e.getUint16(t);if(n===2)return e.getUint32(t)}function gi(e,t,n,r){if((t===1||t===2)&&r>0)return he(e,n,r)}function he(e,t,n){return n===4?e.getUint32(t):n===8?(console.warn("This file uses an 8-bit offset which is currently not supported by ExifReader. Contact the maintainer to get it fixed."),Jt(e,t)):0}var Ei=1718909296,Si=1768977008,xi=1835365473,Ii=1768714083,hi=1768517222,Ti=1768842853,Fi=1768973167,_i=1668246642,Qt=1165519206,Ve=1835625829,Ai=1970432288;function Q(e,t){let{length:o,contentOffset:s}=Pi(e,t);if(o<8)return;let u=e.getUint32(t+4);if(u===Ei)return Bi(e,s,o);if(u===Si)return Gi(e,t,s,o);if(u===Fi)return ki(e,t,s,o);if(u===_i)return Hi(e,s,o);let l=e.getUint8(s);return u===xi?Xi(e,t,s+1,o):u===Ii?qt(e,l,s+1,o):u===hi?Yi(e,t,l,s+1,o):u===Ti?Ki(e,t,l,s+1,o):{type:void 0,length:o}}function Pi(e,t){let s=e.getUint32(t);return Ci(s)?{length:e.byteLength-t,contentOffset:t+4+4}:Ni(s)&&yi(e,t)?{length:e.getUint32(t+12),contentOffset:t+4+4+8}:{length:s,contentOffset:t+4+4}}function Ci(e){return e===0}function Ni(e){return e===1}function yi(e,t){return e.getUint32(t+8)===0}function Te(e){if(p.USE_EXIF||p.USE_XMP||p.USE_ICC){let t={},n=Ui(e);return n?(p.USE_EXIF&&(t.tiffHeaderOffset=bi(e,n)),p.USE_XMP&&(t.xmpChunks=Ri(n)),p.USE_ICC&&(t.iccChunks=Mi(n)),t.hasAppMarkers=t.tiffHeaderOffset!==void 0||t.xmpChunks!==void 0||t.iccChunks!==void 0,t):{hasAppMarkers:!1}}return{}}function Ui(e){let r=0;for(;r+4+4<=e.byteLength;){let i=Q(e,r);if(i===void 0)break;if(i.type==="meta")return i;r+=i.length}}function bi(e,t){try{let n=Oi(t).itemId,r=Qe(t,n),i=r.baseOffset+r.extents[0].extentOffset;return Di(e,i)}catch(n){return}}function Oi(e){return e.subBoxes.find(t=>t.type==="iinf").itemInfos.find(t=>t.itemType===Qt)}function Qe(e,t){return e.subBoxes.find(n=>n.type==="iloc").items.find(n=>n.itemId===t)}function Di(e,t){return t+4+e.getUint32(t)}function Ri(e){try{let t=Li(e).itemId,n=Qe(e,t),r=Qe(e,t).extents[0];return[{dataOffset:n.baseOffset+r.extentOffset,length:r.extentLength}]}catch(t){return}}function Li(e){return e.subBoxes.find(t=>t.type==="iinf").itemInfos.find(t=>t.itemType===Ve&&t.contentType==="application/rdf+xml")}function Mi(e){try{let t=e.subBoxes.find(n=>n.type==="iprp").subBoxes.find(n=>n.type==="ipco").properties.find(n=>n.type==="colr").icc;if(t)return[t]}catch(t){}}function Bi(e,t,n){return{type:"ftyp",majorBrand:E(e,t,4),length:n}}function Gi(e,t,n,r){return{type:"iprp",subBoxes:Fe(e,n,r-(n-t)),length:r}}function ki(e,t,n,r){return{type:"ipco",properties:Fe(e,n,r-(n-t)),length:r}}function Hi(e,t,n){return{type:"colr",icc:Zi(e,t),length:n}}function Zi(e,t){let r=E(e,t,4);if(!(r!=="prof"&&r!=="rICC"))return{offset:t+4,length:e.getUint32(t+4),chunkNumber:1,chunksTotal:1}}function Xi(e,t,n,r){return{type:"meta",subBoxes:Fe(e,n+3,r-(n+3-t)),length:r}}function Fe(e,t,n){let r=[Qt,Ve],i=[],o=t;for(;o<t+n;){let s=Q(e,o);if(s===void 0)break;s.type!==void 0&&(s.itemType===void 0||r.indexOf(s.itemType)!==-1)&&i.push(s),o+=s.length}return i}function Yi(e,t,n,r,i){let{offsets:o}=zi(n,r);return{type:"iinf",itemInfos:Fe(e,o.itemInfos,i-(o.itemInfos-t)),length:i}}function zi(e,t){let r={entryCount:t+3},i={};return e===0?i.entryCount=2:i.entryCount=4,r.itemInfos=r.entryCount+i.entryCount,{offsets:r}}function Ki(e,t,n,r,i){r+=3;let s={type:"infe",length:i};return(n===0||n===1)&&(s.itemId=e.getUint16(r),r+=2,s.itemProtectionIndex=e.getUint16(r),r+=2,s.itemName=Z(e,r),r+=s.itemName.length+1),n>=2&&(n===2?(s.itemId=e.getUint16(r),r+=2):n===3&&(s.itemId=e.getUint32(r),r+=4),s.itemProtectionIndex=e.getUint16(r),r+=2,s.itemType=e.getUint32(r),r+=4,s.itemName=Z(e,r),r+=s.itemName.length+1,s.itemType===Ve?(s.contentType=Z(e,r),r+=s.contentType.length+1,t+i>r&&(s.contentEncoding=Z(e,r),r+=s.contentEncoding.length+1)):s.itemType===Ai&&(s.itemUri=Z(e,r),r+=s.itemUri.length+1)),s}var et={isHeicFile:Wi,findHeicOffsets:$i};function Wi(e){if(!e)return!1;let t=["heic","heix","hevc","hevx","heim","heis","hevm","hevs","mif1"];try{let n=Q(e,0);return n&&t.indexOf(n.majorBrand)!==-1}catch(n){return!1}}function $i(e){return Te(e)}var tt={isAvifFile:ji,findAvifOffsets:vi};function ji(e){if(!e)return!1;try{let t=Q(e,0);return t&&t.majorBrand==="avif"}catch(t){return!1}}function vi(e){return Te(e)}var nt={isWebpFile:wi,findOffsets:Ji};function wi(e){let n="RIFF",i="WEBP";return!!e&&E(e,0,n.length)===n&&E(e,8,i.length)===i}function Ji(e){let r="Exif\0\0",o=12,s=!1,u,l,f,a;for(;o+8<e.byteLength;){let m=E(e,o,4),g=e.getUint32(o+4,!0);p.USE_EXIF&&m==="EXIF"?(s=!0,E(e,o+8,r.length)===r?u=o+8+r.length:u=o+8):p.USE_XMP&&m==="XMP "?(s=!0,l=[{dataOffset:o+8,length:g}]):p.USE_ICC&&m==="ICCP"?(s=!0,f=[{offset:o+8,length:g,chunkNumber:1,chunksTotal:1}]):m==="VP8X"&&(s=!0,a=o+8),o+=8+(g%2===0?g:g+1)}return{hasAppMarkers:s,tiffHeaderOffset:u,xmpChunks:l,iccChunks:f,vp8xChunkOffset:a}}var rt={isGifFile:Vi,findOffsets:eo},qi=6,Qi=["GIF87a","GIF89a"];function Vi(e){return!!e&&Qi.includes(E(e,0,qi))}function eo(){return{gifHeaderOffset:0}}var it={isXMLFile:to,findOffsets:no},en=0,Vt="<?xpacket begin";function to(e){return!!e&&E(e,en,Vt.length)===Vt}function no(e){let t=[];return t.push({dataOffset:en,length:e.byteLength}),{xmpChunks:t}}var tn={parseAppMarkers:ro};function ro(e,t){if(p.USE_TIFF&&ze.isTiffFile(e))return z(ze.findTiffOffsets(),"tiff","TIFF");if(p.USE_JPEG&&We.isJpegFile(e))return z(We.findJpegOffsets(e),"jpeg","JPEG");if(p.USE_PNG&&we.isPngFile(e))return z(we.findPngOffsets(e,t),"png","PNG");if(p.USE_HEIC&&et.isHeicFile(e))return z(et.findHeicOffsets(e),"heic","HEIC");if(p.USE_AVIF&&tt.isAvifFile(e))return z(tt.findAvifOffsets(e),"avif","AVIF");if(p.USE_WEBP&&nt.isWebpFile(e))return z(nt.findOffsets(e),"webp","WebP");if(p.USE_GIF&&rt.isGifFile(e))return z(rt.findOffsets(e),"gif","GIF");if(p.USE_XMP&&it.isXMLFile(e))return z(it.findOffsets(e),"xml","XML");throw new Error("Invalid image format")}function z(e,t,n){return I({},e,{fileType:{value:t,description:n}})}var x={ApertureValue:e=>Math.pow(Math.sqrt(2),e[0]/e[1]).toFixed(2),ColorSpace(e){return e===1?"sRGB":e===65535?"Uncalibrated":"Unknown"},ComponentsConfiguration(e){return e.map(t=>{if(t===49)return"Y";if(t===50)return"Cb";if(t===51)return"Cr";if(t===52)return"R";if(t===53)return"G";if(t===54)return"B"}).join("")},Contrast(e){return e===0?"Normal":e===1?"Soft":e===2?"Hard":"Unknown"},CustomRendered(e){return e===0?"Normal process":e===1?"Custom process":"Unknown"},ExposureMode(e){return e===0?"Auto exposure":e===1?"Manual exposure":e===2?"Auto bracket":"Unknown"},ExposureProgram(e){return e===0?"Undefined":e===1?"Manual":e===2?"Normal program":e===3?"Aperture priority":e===4?"Shutter priority":e===5?"Creative program":e===6?"Action program":e===7?"Portrait mode":e===8?"Landscape mode":e===9?"Bulb":"Unknown"},ExposureTime(e){if(e[0]/e[1]>.25){let t=e[0]/e[1];return Number.isInteger(t)?""+t:t.toFixed(1)}return e[0]!==0?`1/${Math.round(e[1]/e[0])}`:`0/${e[1]}`},FNumber:e=>`f/${e[0]/e[1]}`,FocalLength:e=>e[0]/e[1]+" mm",FocalPlaneResolutionUnit(e){return e===2?"inches":e===3?"centimeters":"Unknown"},LightSource:e=>e===1?"Daylight":e===2?"Fluorescent":e===3?"Tungsten (incandescent light)":e===4?"Flash":e===9?"Fine weather":e===10?"Cloudy weather":e===11?"Shade":e===12?"Daylight fluorescent (D 5700 \u2013 7100K)":e===13?"Day white fluorescent (N 4600 \u2013 5400K)":e===14?"Cool white fluorescent (W 3900 \u2013 4500K)":e===15?"White fluorescent (WW 3200 \u2013 3700K)":e===17?"Standard light A":e===18?"Standard light B":e===19?"Standard light C":e===20?"D55":e===21?"D65":e===22?"D75":e===23?"D50":e===24?"ISO studio tungsten":e===255?"Other light source":"Unknown",MeteringMode(e){return e===1?"Average":e===2?"CenterWeightedAverage":e===3?"Spot":e===4?"MultiSpot":e===5?"Pattern":e===6?"Partial":e===255?"Other":"Unknown"},ResolutionUnit(e){return e===2?"inches":e===3?"centimeters":"Unknown"},Saturation(e){return e===0?"Normal":e===1?"Low saturation":e===2?"High saturation":"Unknown"},SceneCaptureType(e){return e===0?"Standard":e===1?"Landscape":e===2?"Portrait":e===3?"Night scene":"Unknown"},Sharpness(e){return e===0?"Normal":e===1?"Soft":e===2?"Hard":"Unknown"},ShutterSpeedValue(e){let t=Math.pow(2,e[0]/e[1]);return t<=1?`${Math.round(1/t)}`:`1/${Math.round(t)}`},WhiteBalance(e){return e===0?"Auto white balance":e===1?"Manual white balance":"Unknown"},XResolution:e=>""+Math.round(e[0]/e[1]),YResolution:e=>""+Math.round(e[0]/e[1])};var ot={11:"ProcessingSoftware",254:{name:"SubfileType",description:e=>({0:"Full-resolution image",1:"Reduced-resolution image",2:"Single page of multi-page image",3:"Single page of multi-page reduced-resolution image",4:"Transparency mask",5:"Transparency mask of reduced-resolution image",6:"Transparency mask of multi-page image",7:"Transparency mask of reduced-resolution multi-page image",65537:"Alternate reduced-resolution image",4294967295:"Invalid"})[e]||"Unknown"},255:{name:"OldSubfileType",description:e=>({0:"Full-resolution image",1:"Reduced-resolution image",2:"Single page of multi-page image"})[e]||"Unknown"},256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:{name:"Thresholding",description:e=>({1:"No dithering or halftoning",2:"Ordered dither or halfton",3:"Randomized dither"})[e]||"Unknown"},264:"CellWidth",265:"CellLength",266:{name:"FillOrder",description:e=>({1:"Normal",2:"Reversed"})[e]||"Unknown"},269:"DocumentName",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:{name:"Orientation",description:e=>e===1?"top-left":e===2?"top-right":e===3?"bottom-right":e===4?"bottom-left":e===5?"left-top":e===6?"right-top":e===7?"right-bottom":e===8?"left-bottom":"Undefined"},277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:{name:"XResolution",description:x.XResolution},283:{name:"YResolution",description:x.YResolution},284:"PlanarConfiguration",285:"PageName",286:{name:"XPosition",description:e=>""+Math.round(e[0]/e[1])},287:{name:"YPosition",description:e=>""+Math.round(e[0]/e[1])},290:{name:"GrayResponseUnit",description:e=>({1:"0.1",2:"0.001",3:"0.0001",4:"1e-05",5:"1e-06"})[e]||"Unknown"},296:{name:"ResolutionUnit",description:x.ResolutionUnit},297:"PageNumber",301:"TransferFunction",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",317:"Predictor",318:{name:"WhitePoint",description:e=>e.map(t=>`${t[0]}/${t[1]}`).join(", ")},319:{name:"PrimaryChromaticities",description:e=>e.map(t=>`${t[0]}/${t[1]}`).join(", ")},321:"HalftoneHints",322:"TileWidth",323:"TileLength",330:"A100DataOffset",332:{name:"InkSet",description:e=>({1:"CMYK",2:"Not CMYK"})[e]||"Unknown"},337:"TargetPrinter",338:{name:"ExtraSamples",description:e=>({0:"Unspecified",1:"Associated Alpha",2:"Unassociated Alpha"})[e]||"Unknown"},339:{name:"SampleFormat",description:e=>{let t={1:"Unsigned",2:"Signed",3:"Float",4:"Undefined",5:"Complex int",6:"Complex float"};return Array.isArray(e)?e.map(n=>t[n]||"Unknown").join(", "):"Unknown"}},513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",529:{name:"YCbCrCoefficients",description:e=>e.map(t=>""+t[0]/t[1]).join("/")},530:"YCbCrSubSampling",531:{name:"YCbCrPositioning",description:e=>e===1?"centered":e===2?"co-sited":"undefined "+e},532:{name:"ReferenceBlackWhite",description:e=>e.map(t=>""+t[0]/t[1]).join(", ")},700:"ApplicationNotes",18246:"Rating",18249:"RatingPercent",33432:{name:"Copyright",description:e=>e.join("; ")},33550:"PixelScale",33723:"IPTC-NAA",33920:"IntergraphMatrix",33922:"ModelTiePoint",34118:"SEMInfo",34264:"ModelTransform",34377:"PhotoshopSettings",34665:"Exif IFD Pointer",34675:"ICC_Profile",34735:"GeoTiffDirectory",34736:"GeoTiffDoubleParams",34737:"GeoTiffAsciiParams",34853:"GPS Info IFD Pointer",40091:{name:"XPTitle",description:oe},40092:{name:"XPComment",description:oe},40093:{name:"XPAuthor",description:oe},40094:{name:"XPKeywords",description:oe},40095:{name:"XPSubject",description:oe},42112:"GDALMetadata",42113:"GDALNoData",50341:"PrintIM",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"DNGLensInfo",50739:"ShadowScale",50741:{name:"MakerNoteSafety",description:e=>({0:"Unsafe",1:"Safe"})[e]||"Unknown"},50778:{name:"CalibrationIlluminant1",description:x.LightSource},50779:{name:"CalibrationIlluminant2",description:x.LightSource},50781:"RawDataUniqueID",50827:"OriginalRawFileName",50828:"OriginalRawFileData",50831:"AsShotICCProfile",50832:"AsShotPreProfileMatrix",50833:"CurrentICCProfile",50834:"CurrentPreProfileMatrix",50879:"ColorimetricReference",50885:"SRawType",50898:"PanasonicTitle",50899:"PanasonicTitle2",50931:"CameraCalibrationSig",50932:"ProfileCalibrationSig",50933:"ProfileIFD",50934:"AsShotProfileName",50936:"ProfileName",50937:"ProfileHueSatMapDims",50938:"ProfileHueSatMapData1",50939:"ProfileHueSatMapData2",50940:"ProfileToneCurve",50941:{name:"ProfileEmbedPolicy",description:e=>({0:"Allow Copying",1:"Embed if Used",2:"Never Embed",3:"No Restrictions"})[e]||"Unknown"},50942:"ProfileCopyright",50964:"ForwardMatrix1",50965:"ForwardMatrix2",50966:"PreviewApplicationName",50967:"PreviewApplicationVersion",50968:"PreviewSettingsName",50969:"PreviewSettingsDigest",50970:{name:"PreviewColorSpace",description:e=>({1:"Gray Gamma 2.2",2:"sRGB",3:"Adobe RGB",4:"ProPhoto RGB"})[e]||"Unknown"},50971:"PreviewDateTime",50972:"RawImageDigest",50973:"OriginalRawFileDigest",50981:"ProfileLookTableDims",50982:"ProfileLookTableData",51043:"TimeCodes",51044:"FrameRate",51058:"TStop",51081:"ReelName",51089:"OriginalDefaultFinalSize",51090:"OriginalBestQualitySize",51091:"OriginalDefaultCropSize",51105:"CameraLabel",51107:{name:"ProfileHueSatMapEncoding",description:e=>({0:"Linear",1:"sRGB"})[e]||"Unknown"},51108:{name:"ProfileLookTableEncoding",description:e=>({0:"Linear",1:"sRGB"})[e]||"Unknown"},51109:"BaselineExposureOffset",51110:{name:"DefaultBlackRender",description:e=>({0:"Auto",1:"None"})[e]||"Unknown"},51111:"NewRawImageDigest",51112:"RawToPreviewGain"};function oe(e){return new TextDecoder("utf-16").decode(new Uint8Array(e)).replace(/\u0000+$/,"")}var nn={33434:{name:"ExposureTime",description:x.ExposureTime},33437:{name:"FNumber",description:x.FNumber},34850:{name:"ExposureProgram",description:x.ExposureProgram},34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:{name:"OECF",description:()=>"[Raw OECF table data]"},34858:"TimeZoneOffset",34859:"SelfTimerMode",34864:{name:"SensitivityType",description:e=>({1:"Standard Output Sensitivity",2:"Recommended Exposure Index",3:"ISO Speed",4:"Standard Output Sensitivity and Recommended Exposure Index",5:"Standard Output Sensitivity and ISO Speed",6:"Recommended Exposure Index and ISO Speed",7:"Standard Output Sensitivity, Recommended Exposure Index and ISO Speed"})[e]||"Unknown"},34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:{name:"ExifVersion",description:e=>T(e)},36867:"DateTimeOriginal",36868:"DateTimeDigitized",36873:"GooglePlusUploadCode",36880:"OffsetTime",36881:"OffsetTimeOriginal",36882:"OffsetTimeDigitized",37121:{name:"ComponentsConfiguration",description:x.ComponentsConfiguration},37122:"CompressedBitsPerPixel",37377:{name:"ShutterSpeedValue",description:x.ShutterSpeedValue},37378:{name:"ApertureValue",description:x.ApertureValue},37379:"BrightnessValue",37380:"ExposureBiasValue",37381:{name:"MaxApertureValue",description:e=>Math.pow(Math.sqrt(2),e[0]/e[1]).toFixed(2)},37382:{name:"SubjectDistance",description:e=>e[0]/e[1]+" m"},37383:{name:"MeteringMode",description:x.MeteringMode},37384:{name:"LightSource",description:x.LightSource},37385:{name:"Flash",description:e=>e===0?"Flash did not fire":e===1?"Flash fired":e===5?"Strobe return light not detected":e===7?"Strobe return light detected":e===9?"Flash fired, compulsory flash mode":e===13?"Flash fired, compulsory flash mode, return light not detected":e===15?"Flash fired, compulsory flash mode, return light detected":e===16?"Flash did not fire, compulsory flash mode":e===24?"Flash did not fire, auto mode":e===25?"Flash fired, auto mode":e===29?"Flash fired, auto mode, return light not detected":e===31?"Flash fired, auto mode, return light detected":e===32?"No flash function":e===65?"Flash fired, red-eye reduction mode":e===69?"Flash fired, red-eye reduction mode, return light not detected":e===71?"Flash fired, red-eye reduction mode, return light detected":e===73?"Flash fired, compulsory flash mode, red-eye reduction mode":e===77?"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected":e===79?"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected":e===89?"Flash fired, auto mode, red-eye reduction mode":e===93?"Flash fired, auto mode, return light not detected, red-eye reduction mode":e===95?"Flash fired, auto mode, return light detected, red-eye reduction mode":"Unknown"},37386:{name:"FocalLength",description:x.FocalLength},37393:"ImageNumber",37394:{name:"SecurityClassification",description:e=>({C:"Confidential",R:"Restricted",S:"Secret",T:"Top Secret",U:"Unclassified"})[e]||"Unknown"},37395:"ImageHistory",37396:{name:"SubjectArea",description:e=>e.length===2?`Location; X: ${e[0]}, Y: ${e[1]}`:e.length===3?`Circle; X: ${e[0]}, Y: ${e[1]}, diameter: ${e[2]}`:e.length===4?`Rectangle; X: ${e[0]}, Y: ${e[1]}, width: ${e[2]}, height: ${e[3]}`:"Unknown"},37500:{name:"MakerNote",description:()=>"[Raw maker note data]"},37510:{name:"UserComment",description:re},37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",37724:"ImageSourceData",37888:{name:"AmbientTemperature",description:e=>e[0]/e[1]+" \xB0C"},37889:{name:"Humidity",description:e=>e[0]/e[1]+" %"},37890:{name:"Pressure",description:e=>e[0]/e[1]+" hPa"},37891:{name:"WaterDepth",description:e=>e[0]/e[1]+" m"},37892:{name:"Acceleration",description:e=>e[0]/e[1]+" mGal"},37893:{name:"CameraElevationAngle",description:e=>e[0]/e[1]+" \xB0"},40960:{name:"FlashpixVersion",description:e=>e.map(t=>String.fromCharCode(t)).join("")},40961:{name:"ColorSpace",description:x.ColorSpace},40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",40965:"Interoperability IFD Pointer",41483:"FlashEnergy",41484:{name:"SpatialFrequencyResponse",description:()=>"[Raw SFR table data]"},41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:{name:"FocalPlaneResolutionUnit",description:x.FocalPlaneResolutionUnit},41492:{name:"SubjectLocation",description:([e,t])=>`X: ${e}, Y: ${t}`},41493:"ExposureIndex",41495:{name:"SensingMethod",description:e=>e===1?"Undefined":e===2?"One-chip color area sensor":e===3?"Two-chip color area sensor":e===4?"Three-chip color area sensor":e===5?"Color sequential area sensor":e===7?"Trilinear sensor":e===8?"Color sequential linear sensor":"Unknown"},41728:{name:"FileSource",description:e=>e===3?"DSC":"Unknown"},41729:{name:"SceneType",description:e=>e===1?"A directly photographed image":"Unknown"},41730:{name:"CFAPattern",description:()=>"[Raw CFA pattern table data]"},41985:{name:"CustomRendered",description:x.CustomRendered},41986:{name:"ExposureMode",description:x.ExposureMode},41987:{name:"WhiteBalance",description:x.WhiteBalance},41988:{name:"DigitalZoomRatio",description:e=>e[0]===0?"Digital zoom was not used":""+e[0]/e[1]},41989:{name:"FocalLengthIn35mmFilm",description:e=>e===0?"Unknown":e},41990:{name:"SceneCaptureType",description:x.SceneCaptureType},41991:{name:"GainControl",description:e=>e===0?"None":e===1?"Low gain up":e===2?"High gain up":e===3?"Low gain down":e===4?"High gain down":"Unknown"},41992:{name:"Contrast",description:x.Contrast},41993:{name:"Saturation",description:x.Saturation},41994:{name:"Sharpness",description:x.Sharpness},41995:{name:"DeviceSettingDescription",description:()=>"[Raw device settings table data]"},41996:{name:"SubjectDistanceRange",description:e=>e===1?"Macro":e===2?"Close view":e===3?"Distant view":"Unknown"},42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:{name:"LensSpecification",description:e=>{let t=parseFloat((e[0][0]/e[0][1]).toFixed(5)),n=parseFloat((e[1][0]/e[1][1]).toFixed(5)),r=`${t}-${n} mm`;if(e[3][1]===0)return`${r} f/?`;let i=1/(e[2][1]/e[2][1]/(e[3][0]/e[3][1]));return`${r} f/${parseFloat(i.toFixed(5))}`}},42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42080:{name:"CompositeImage",description:e=>({1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"})[e]||"Unknown"},42081:"SourceImageNumberOfCompositeImage",42082:"SourceExposureTimesOfCompositeImage",42240:"Gamma",59932:"Padding",59933:"OffsetSchema",65e3:"OwnerName",65001:"SerialNumber",65002:"Lens",65100:"RawFile",65101:"Converter",65102:"WhiteBalance",65105:"Exposure",65106:"Shadows",65107:"Brightness",65108:"Contrast",65109:"Saturation",65110:"Sharpness",65111:"Smoothness",65112:"MoireFilter"};var rn={0:{name:"GPSVersionID",description:e=>e[0]===2&&e[1]===2&&e[2]===0&&e[3]===0?"Version 2.2":"Unknown"},1:{name:"GPSLatitudeRef",description:e=>{let t=e.join("");return t==="N"?"North latitude":t==="S"?"South latitude":"Unknown"}},2:{name:"GPSLatitude",description:q},3:{name:"GPSLongitudeRef",description:e=>{let t=e.join("");return t==="E"?"East longitude":t==="W"?"West longitude":"Unknown"}},4:{name:"GPSLongitude",description:q},5:{name:"GPSAltitudeRef",description:e=>e===0?"Sea level":e===1?"Sea level reference (negative value)":"Unknown"},6:{name:"GPSAltitude",description:e=>e[0]/e[1]+" m"},7:{name:"GPSTimeStamp",description:e=>e.map(([t,n])=>{let r=t/n;return/^\d(\.|$)/.test(`${r}`)?`0${r}`:r}).join(":")},8:"GPSSatellites",9:{name:"GPSStatus",description:e=>{let t=e.join("");return t==="A"?"Measurement in progress":t==="V"?"Measurement Interoperability":"Unknown"}},10:{name:"GPSMeasureMode",description:e=>{let t=e.join("");return t==="2"?"2-dimensional measurement":t==="3"?"3-dimensional measurement":"Unknown"}},11:"GPSDOP",12:{name:"GPSSpeedRef",description:e=>{let t=e.join("");return t==="K"?"Kilometers per hour":t==="M"?"Miles per hour":t==="N"?"Knots":"Unknown"}},13:"GPSSpeed",14:{name:"GPSTrackRef",description:e=>{let t=e.join("");return t==="T"?"True direction":t==="M"?"Magnetic direction":"Unknown"}},15:"GPSTrack",16:{name:"GPSImgDirectionRef",description:e=>{let t=e.join("");return t==="T"?"True direction":t==="M"?"Magnetic direction":"Unknown"}},17:"GPSImgDirection",18:"GPSMapDatum",19:{name:"GPSDestLatitudeRef",description:e=>{let t=e.join("");return t==="N"?"North latitude":t==="S"?"South latitude":"Unknown"}},20:{name:"GPSDestLatitude",description:e=>e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600},21:{name:"GPSDestLongitudeRef",description:e=>{let t=e.join("");return t==="E"?"East longitude":t==="W"?"West longitude":"Unknown"}},22:{name:"GPSDestLongitude",description:e=>e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600},23:{name:"GPSDestBearingRef",description:e=>{let t=e.join("");return t==="T"?"True direction":t==="M"?"Magnetic direction":"Unknown"}},24:"GPSDestBearing",25:{name:"GPSDestDistanceRef",description:e=>{let t=e.join("");return t==="K"?"Kilometers":t==="M"?"Miles":t==="N"?"Knots":"Unknown"}},26:"GPSDestDistance",27:{name:"GPSProcessingMethod",description:re},28:{name:"GPSAreaInformation",description:re},29:"GPSDateStamp",30:{name:"GPSDifferential",description:e=>e===0?"Measurement without differential correction":e===1?"Differential correction applied":"Unknown"},31:"GPSHPositioningError"};var on={1:"InteroperabilityIndex",2:{name:"InteroperabilityVersion",description:e=>T(e)},4096:"RelatedImageFileFormat",4097:"RelatedImageWidth",4098:"RelatedImageHeight"};var sn={45056:{name:"MPFVersion",description:e=>T(e)},45057:"NumberOfImages",45058:"MPEntry",45059:"ImageUIDList",45060:"TotalFrames"};var un={4:{name:"ShotInfo",description:e=>e}};var cn=I({},ot,nn),se="0th",st="1st",ut="exif",ct="gps",ft="interoperability",at="mpf",lt="canon",M={[se]:cn,[st]:ot,[ut]:cn,[ct]:rn,[ft]:on,[at]:p.USE_MPF?sn:{},[lt]:p.USE_MAKER_NOTES?un:{}};var fn={1:1,2:1,3:2,4:4,5:8,7:1,9:4,10:8,13:4},pt={BYTE:1,ASCII:2,SHORT:3,LONG:4,RATIONAL:5,UNDEFINED:7,SLONG:9,SRATIONAL:10,IFD:13},c={getAsciiValue:io,getByteAt:an,getAsciiAt:oo,getShortAt:so,getLongAt:_e,getRationalAt:uo,getUndefinedAt:co,getSlongAt:dt,getSrationalAt:fo,getIfdPointerAt:ao,typeSizes:fn,tagTypes:pt,getTypeSize:lo};function io(e){return e.map(t=>String.fromCharCode(t))}function an(e,t){return e.getUint8(t)}function oo(e,t){return e.getUint8(t)}function so(e,t,n){return e.getUint16(t,n===D.LITTLE_ENDIAN)}function _e(e,t,n){return e.getUint32(t,n===D.LITTLE_ENDIAN)}function uo(e,t,n){return[_e(e,t,n),_e(e,t+4,n)]}function co(e,t){return an(e,t)}function dt(e,t,n){return e.getInt32(t,n===D.LITTLE_ENDIAN)}function fo(e,t,n){return[dt(e,t,n),dt(e,t+4,n)]}function ao(e,t,n){return _e(e,t,n)}function lo(e){if(pt[e]===void 0)throw new Error("No such type found.");return fn[pt[e]]}var po={1:c.getByteAt,2:c.getAsciiAt,3:c.getShortAt,4:c.getLongAt,5:c.getRationalAt,7:c.getUndefinedAt,9:c.getSlongAt,10:c.getSrationalAt,13:c.getIfdPointerAt};function Ae(e,t,n){return t+c.getLongAt(e,t+4,n)}function R(e,t,n,r,i,o){let s=c.getTypeSize("SHORT"),u=12,l={},f=mo(e,r,i);r+=s;for(let a=0;a<f&&!(r+u>e.byteLength);a++){let m=go(e,t,n,r,i,o);m!==void 0&&(l[m.name]={id:m.id,value:m.value,description:m.description},m.name==="MakerNote"&&(l[m.name].__offset=m.__offset)),r+=u}if(p.USE_THUMBNAIL&&r<e.byteLength-c.getTypeSize("LONG")){let a=c.getLongAt(e,r,i);a!==0&&t===se&&(l.Thumbnail=R(e,st,n,n+a,i,o))}return l}function mo(e,t,n){return t+c.getTypeSize("SHORT")<=e.byteLength?c.getShortAt(e,t,n):0}function go(e,t,n,r,i,o){let u=c.getTypeSize("SHORT"),l=u+c.getTypeSize("SHORT"),f=l+c.getTypeSize("LONG"),a=c.getShortAt(e,r,i),m=c.getShortAt(e,r+u,i),g=c.getLongAt(e,r+l,i),S,A;if(c.typeSizes[m]===void 0||!o&&M[t][a]===void 0)return;if(Eo(m,g))A=r+f,S=ln(e,A,m,g,i);else if(A=c.getLongAt(e,r+f,i),So(e,n,A,m,g)){let y=a===33723;S=ln(e,n+A,m,g,i,y)}else S="<faulty value>";m===c.tagTypes.ASCII&&(S=xo(S),S=Io(S));let P=`undefined-${a}`,_=S;if(M[t][a]!==void 0)if(M[t][a].name!==void 0&&M[t][a].description!==void 0){P=M[t][a].name;try{_=M[t][a].description(S)}catch(y){_=pn(S)}}else m===c.tagTypes.RATIONAL||m===c.tagTypes.SRATIONAL?(P=M[t][a],_=""+S[0]/S[1]):(P=M[t][a],_=pn(S));return{id:a,name:P,value:S,description:_,__offset:A}}function Eo(e,t){return c.typeSizes[e]*t<=c.getTypeSize("LONG")}function ln(e,t,n,r,i,o=!1){let s=[];o&&(r=r*c.typeSizes[n],n=c.tagTypes.BYTE);for(let u=0;u<r;u++)s.push(po[n](e,t,i)),t+=c.typeSizes[n];return n===c.tagTypes.ASCII?s=c.getAsciiValue(s):s.length===1&&(s=s[0]),s}function So(e,t,n,r,i){return t+n+c.typeSizes[r]*i<=e.byteLength}function xo(e){let t=[],n=0;for(let r=0;r<e.length;r++){if(e[r]==="\0"){n++;continue}t[n]===void 0&&(t[n]=""),t[n]+=e[r]}return t}function Io(e){try{return e.map(t=>decodeURIComponent(escape(t)))}catch(t){return e}}function pn(e){return e instanceof Array?e.join(", "):e}var dn="Exif IFD Pointer",mn="GPS Info IFD Pointer",gn="Interoperability IFD Pointer",Pe={read:ho};function ho(e,t,n){let r=D.getByteOrder(e,t),i=To(e,t,r,n);return i=Fo(i,e,t,r,n),i=_o(i,e,t,r,n),i=Ao(i,e,t,r,n),{tags:i,byteOrder:r}}function To(e,t,n,r){return R(e,se,t,Ae(e,t,n),n,r)}function Fo(e,t,n,r,i){return e[dn]!==void 0?I(e,R(t,ut,n,n+e[dn].value,r,i)):e}function _o(e,t,n,r,i){return e[mn]!==void 0?I(e,R(t,ct,n,n+e[mn].value,r,i)):e}function Ao(e,t,n,r,i){return e[gn]!==void 0?I(e,R(t,ft,n,n+e[gn].value,r,i)):e}var En={read:Po},V=16;function Po(e,t,n){let r=D.getByteOrder(e,t),i=R(e,at,t,Ae(e,t,r),r,n);return Co(e,t,i,r)}function Co(e,t,n,r){if(!n.MPEntry)return n;let i=[];for(let o=0;o<Math.ceil(n.MPEntry.value.length/V);o++){i[o]={};let s=ue(n.MPEntry.value,o*V,c.getTypeSize("LONG"),r);i[o].ImageFlags=No(s),i[o].ImageFormat=yo(s),i[o].ImageType=Uo(s);let u=ue(n.MPEntry.value,o*V+4,c.getTypeSize("LONG"),r);i[o].ImageSize={value:u,description:""+u};let l=bo(o,n.MPEntry,r,t);i[o].ImageOffset={value:l,description:""+l};let f=ue(n.MPEntry.value,o*V+12,c.getTypeSize("SHORT"),r);i[o].DependentImage1EntryNumber={value:f,description:""+f};let a=ue(n.MPEntry.value,o*V+14,c.getTypeSize("SHORT"),r);i[o].DependentImage2EntryNumber={value:a,description:""+a},i[o].image=e.buffer.slice(l,l+u),ge(i[o],"base64",function(){return Ee(this.image)})}return n.Images=i,n}function ue(e,t,n,r){if(r===D.LITTLE_ENDIAN){let o=0;for(let s=0;s<n;s++)o+=e[t+s]<<8*s;return o}let i=0;for(let o=0;o<n;o++)i+=e[t+o]<<8*(n-1-o);return i}function No(e){let t=[e>>31&1,e>>30&1,e>>29&1],n=[];return t[0]&&n.push("Dependent Parent Image"),t[1]&&n.push("Dependent Child Image"),t[2]&&n.push("Representative Image"),{value:t,description:n.join(", ")||"None"}}function yo(e){let t=e>>24&7;return{value:t,description:t===0?"JPEG":"Unknown"}}function Uo(e){let t=e&16777215;return{value:t,description:{196608:"Baseline MP Primary Image",65537:"Large Thumbnail (VGA equivalent)",65538:"Large Thumbnail (Full HD equivalent)",131073:"Multi-Frame Image (Panorama)",131074:"Multi-Frame Image (Disparity)",131075:"Multi-Frame Image (Multi-Angle)",0:"Undefined"}[t]||"Unknown"}}function bo(e,t,n,r){return Oo(e)?0:ue(t.value,e*V+8,c.getTypeSize("LONG"),n)+r}function Oo(e){return e===0}var Sn={read:Do};function Do(e,t){let n=Ro(e,t),r=Go(e,t,n);return{"Bits Per Sample":Lo(e,t,n),"Image Height":Mo(e,t,n),"Image Width":Bo(e,t,n),"Color Components":r,Subsampling:r&&ko(e,t,r.value,n)}}function Ro(e,t){return c.getShortAt(e,t)}function Lo(e,t,n){if(2+1>n)return;let o=c.getByteAt(e,t+2);return{value:o,description:""+o}}function Mo(e,t,n){if(3+2>n)return;let o=c.getShortAt(e,t+3);return{value:o,description:`${o}px`}}function Bo(e,t,n){if(5+2>n)return;let o=c.getShortAt(e,t+5);return{value:o,description:`${o}px`}}function Go(e,t,n){if(7+1>n)return;let o=c.getByteAt(e,t+7);return{value:o,description:""+o}}function ko(e,t,n,r){if(8+3*n>r)return;let s=[];for(let u=0;u<n;u++){let l=t+8+u*3;s.push([c.getByteAt(e,l),c.getByteAt(e,l+1),c.getByteAt(e,l+2)])}return{value:s,description:s.length>1?Ho(s)+Zo(s):""}}function Ho(e){let t={1:"Y",2:"Cb",3:"Cr",4:"I",5:"Q"};return e.map(n=>t[n[0]]).join("")}function Zo(e){let t={17:"4:4:4 (1 1)",18:"4:4:0 (1 2)",20:"4:4:1 (1 4)",33:"4:2:2 (2 1)",34:"4:2:0 (2 2)",36:"4:2:1 (2 4)",65:"4:1:1 (4 1)",66:"4:1:0 (4 2)"};return e.length===0||e[0][1]===void 0||t[e[0][1]]===void 0?"":t[e[0][1]]}var xn={read:Xo};function Xo(e,t){let n=Yo(e,t),r=vo(e,t,n),i=wo(e,t,n),o={"JFIF Version":zo(e,t,n),"Resolution Unit":Ko(e,t,n),XResolution:$o(e,t,n),YResolution:jo(e,t,n),"JFIF Thumbnail Width":r,"JFIF Thumbnail Height":i};if(r!==void 0&&i!==void 0){let s=Jo(e,t,3*r.value*i.value,n);s&&(o["JFIF Thumbnail"]=s)}for(let s in o)o[s]===void 0&&delete o[s];return o}function Yo(e,t){return c.getShortAt(e,t)}function zo(e,t,n){if(7+2>n)return;let o=c.getByteAt(e,t+7),s=c.getByteAt(e,t+7+1);return{value:o*256+s,description:o+"."+s}}function Ko(e,t,n){if(9+1>n)return;let o=c.getByteAt(e,t+9);return{value:o,description:Wo(o)}}function Wo(e){return e===0?"None":e===1?"inches":e===2?"cm":"Unknown"}function $o(e,t,n){if(10+2>n)return;let o=c.getShortAt(e,t+10);return{value:o,description:""+o}}function jo(e,t,n){if(12+2>n)return;let o=c.getShortAt(e,t+12);return{value:o,description:""+o}}function vo(e,t,n){if(14+1>n)return;let o=c.getByteAt(e,t+14);return{value:o,description:`${o}px`}}function wo(e,t,n){if(15+1>n)return;let o=c.getByteAt(e,t+15);return{value:o,description:`${o}px`}}function Jo(e,t,n,r){return n===0||16+n>r?void 0:{value:e.buffer.slice(t+16,t+16+n),description:"<24-bit RGB pixel data>"}}var B={iptc:{256:{name:"Model Version",description:e=>((e[0]<<8)+e[1]).toString()},261:{name:"Destination",repeatable:!0},276:{name:"File Format",description:e=>((e[0]<<8)+e[1]).toString()},278:{name:"File Format Version",description:e=>((e[0]<<8)+e[1]).toString()},286:"Service Identifier",296:"Envelope Number",306:"Product ID",316:"Envelope Priority",326:{name:"Date Sent",description:mt},336:{name:"Time Sent",description:gt},346:{name:"Coded Character Set",description:In,encoding_name:In},356:"UNO",376:{name:"ARM Identifier",description:e=>((e[0]<<8)+e[1]).toString()},378:{name:"ARM Version",description:e=>((e[0]<<8)+e[1]).toString()},512:{name:"Record Version",description:e=>((e[0]<<8)+e[1]).toString()},515:"Object Type Reference",516:"Object Attribute Reference",517:"Object Name",519:"Edit Status",520:{name:"Editorial Update",description:e=>T(e)==="01"?"Additional Language":"Unknown"},522:"Urgency",524:{name:"Subject Reference",repeatable:!0,description:e=>{let t=T(e).split(":");return t[2]+(t[3]?"/"+t[3]:"")+(t[4]?"/"+t[4]:"")}},527:"Category",532:{name:"Supplemental Category",repeatable:!0},534:"Fixture Identifier",537:{name:"Keywords",repeatable:!0},538:{name:"Content Location Code",repeatable:!0},539:{name:"Content Location Name",repeatable:!0},542:"Release Date",547:"Release Time",549:"Expiration Date",550:"Expiration Time",552:"Special Instructions",554:{name:"Action Advised",description:e=>{let t=T(e);return t==="01"?"Object Kill":t==="02"?"Object Replace":t==="03"?"Object Append":t==="04"?"Object Reference":"Unknown"}},557:{name:"Reference Service",repeatable:!0},559:{name:"Reference Date",repeatable:!0},562:{name:"Reference Number",repeatable:!0},567:{name:"Date Created",description:mt},572:{name:"Time Created",description:gt},574:{name:"Digital Creation Date",description:mt},575:{name:"Digital Creation Time",description:gt},577:"Originating Program",582:"Program Version",587:{name:"Object Cycle",description:e=>{let t=T(e);return t==="a"?"morning":t==="p"?"evening":t==="b"?"both":"Unknown"}},592:{name:"By-line",repeatable:!0},597:{name:"By-line Title",repeatable:!0},602:"City",604:"Sub-location",607:"Province/State",612:"Country/Primary Location Code",613:"Country/Primary Location Name",615:"Original Transmission Reference",617:"Headline",622:"Credit",627:"Source",628:"Copyright Notice",630:{name:"Contact",repeatable:!0},632:"Caption/Abstract",634:{name:"Writer/Editor",repeatable:!0},637:{name:"Rasterized Caption",description:e=>e},642:"Image Type",643:{name:"Image Orientation",description:e=>{let t=T(e);return t==="P"?"Portrait":t==="L"?"Landscape":t==="S"?"Square":"Unknown"}},647:"Language Identifier",662:{name:"Audio Type",description:e=>{let t=T(e),n=t.charAt(0),r=t.charAt(1),i="";return n==="1"?i+="Mono":n==="2"&&(i+="Stereo"),r==="A"?i+=", actuality":r==="C"?i+=", question and answer session":r==="M"?i+=", music, transmitted by itself":r==="Q"?i+=", response to a question":r==="R"?i+=", raw sound":r==="S"?i+=", scener":r==="V"?i+=", voicer":r==="W"&&(i+=", wrap"),i!==""?i:t}},663:{name:"Audio Sampling Rate",description:e=>parseInt(T(e),10)+" Hz"},664:{name:"Audio Sampling Resolution",description:e=>{let t=parseInt(T(e),10);return t+(t===1?" bit":" bits")}},665:{name:"Audio Duration",description:e=>{let t=T(e);return t.length>=6?t.substr(0,2)+":"+t.substr(2,2)+":"+t.substr(4,2):t}},666:"Audio Outcue",698:"Short Document ID",699:"Unique Document ID",700:"Owner ID",712:{name:e=>e.length===2?"ObjectData Preview File Format":"Record 2 destination",description:e=>{if(e.length===2){let t=(e[0]<<8)+e[1];return t===0?"No ObjectData":t===1?"IPTC-NAA Digital Newsphoto Parameter Record":t===2?"IPTC7901 Recommended Message Format":t===3?"Tagged Image File Format (Adobe/Aldus Image data)":t===4?"Illustrator (Adobe Graphics data)":t===5?"AppleSingle (Apple Computer Inc)":t===6?"NAA 89-3 (ANPA 1312)":t===7?"MacBinary II":t===8?"IPTC Unstructured Character Oriented File Format (UCOFF)":t===9?"United Press International ANPA 1312 variant":t===10?"United Press International Down-Load Message":t===11?"JPEG File Interchange (JFIF)":t===12?"Photo-CD Image-Pac (Eastman Kodak)":t===13?"Microsoft Bit Mapped Graphics File [*.BMP]":t===14?"Digital Audio File [*.WAV] (Microsoft & Creative Labs)":t===15?"Audio plus Moving Video [*.AVI] (Microsoft)":t===16?"PC DOS/Windows Executable Files [*.COM][*.EXE]":t===17?"Compressed Binary File [*.ZIP] (PKWare Inc)":t===18?"Audio Interchange File Format AIFF (Apple Computer Inc)":t===19?"RIFF Wave (Microsoft Corporation)":t===20?"Freehand (Macromedia/Aldus)":t===21?'Hypertext Markup Language "HTML" (The Internet Society)':t===22?"MPEG 2 Audio Layer 2 (Musicom), ISO/IEC":t===23?"MPEG 2 Audio Layer 3, ISO/IEC":t===24?"Portable Document File (*.PDF) Adobe":t===25?"News Industry Text Format (NITF)":t===26?"Tape Archive (*.TAR)":t===27?"Tidningarnas Telegrambyr\xE5 NITF version (TTNITF DTD)":t===28?"Ritzaus Bureau NITF version (RBNITF DTD)":t===29?"Corel Draw [*.CDR]":`Unknown format ${t}`}return T(e)}},713:{name:"ObjectData Preview File Format Version",description:(e,t)=>{let n={"00":{"00":"1"},"01":{"01":"1","02":"2","03":"3","04":"4"},"02":{"04":"4"},"03":{"01":"5.0","02":"6.0"},"04":{"01":"1.40"},"05":{"01":"2"},"06":{"01":"1"},11:{"01":"1.02"},20:{"01":"3.1","02":"4.0","03":"5.0","04":"5.5"},21:{"02":"2.0"}},r=T(e);if(t["ObjectData Preview File Format"]){let i=T(t["ObjectData Preview File Format"].value);if(n[i]&&n[i][r])return n[i][r]}return r}},714:"ObjectData Preview Data",1802:{name:"Size Mode",description:e=>e[0].toString()},1812:{name:"Max Subfile Size",description:e=>{let t=0;for(let n=0;n<e.length;n++)t=(t<<8)+e[n];return t.toString()}},1882:{name:"ObjectData Size Announced",description:e=>{let t=0;for(let n=0;n<e.length;n++)t=(t<<8)+e[n];return t.toString()}},1887:{name:"Maximum ObjectData Size",description:e=>{let t=0;for(let n=0;n<e.length;n++)t=(t<<8)+e[n];return t.toString()}}}};function mt(e){let t=T(e);return t.length>=8?t.substr(0,4)+"-"+t.substr(4,2)+"-"+t.substr(6,2):t}function gt(e){let t=T(e),n=t;return t.length>=6&&(n=t.substr(0,2)+":"+t.substr(2,2)+":"+t.substr(4,2),t.length===11&&(n+=t.substr(6,1)+t.substr(7,2)+":"+t.substr(9,2))),n}function In(e){let t=T(e);return t==="\x1B%G"?"UTF-8":t==="\x1B%5"?"Windows-1252":t==="\x1B%/G"?"UTF-8 Level 1":t==="\x1B%/H"?"UTF-8 Level 2":t==="\x1B%/I"?"UTF-8 Level 3":t==="\x1B/A"?"ISO-8859-1":t==="\x1B/B"?"ISO-8859-2":t==="\x1B/C"?"ISO-8859-3":t==="\x1B/D"?"ISO-8859-4":t==="\x1B/@"?"ISO-8859-5":t==="\x1B/G"?"ISO-8859-6":t==="\x1B/F"?"ISO-8859-7":t==="\x1B/H"?"ISO-8859-8":"Unknown"}var hn={get:qo};function qo(){if(typeof TextDecoder!="undefined")return TextDecoder}var Qo=5,Ce={decode:Vo,TAG_HEADER_SIZE:Qo};function Vo(e,t){let n=hn.get();if(typeof n!="undefined"&&e!==void 0)try{return new n(e).decode(t instanceof DataView?t.buffer:Uint8Array.from(t))}catch(i){}let r=t.map(i=>String.fromCharCode(i)).join("");return es(r)}function es(e){try{return decodeURIComponent(escape(e))}catch(t){return e}}var ts=943868237,ce=4,Ne=2,ns=1,rs=2,Fn=4,is=ce+Ne+rs+Fn,os=1028,_n=5,fe={read:ss};function ss(e,t,n){try{if(Array.isArray(e))return Tn(new DataView(Uint8Array.from(e).buffer),{size:e.length},0,n);let{naaBlock:r,dataOffset:i}=us(e,t);return Tn(e,r,i,n)}catch(r){return{}}}function us(e,t){for(;t+is<=e.byteLength;){let n=cs(e,t);if(fs(n))return{naaBlock:n,dataOffset:t+n.headerSize};t+=n.headerSize+n.size+as(n)}throw new Error("No IPTC NAA resource block.")}function cs(e,t){if(e.getUint32(t,!1)!==ts)throw new Error("Not an IPTC resource block.");let n=e.getUint8(t+ce+Ne),r=(n%2===0?n+1:n)+ns;return{headerSize:ce+Ne+r+Fn,type:e.getUint16(t+ce),size:e.getUint32(t+ce+Ne+r)}}function fs(e){return e.type===os}function as(e){return e.size%2!==0?1:0}function Tn(e,t,n,r){let i={},o,s=n+t.size;for(;n<s&&n<e.byteLength;){let{tag:u,tagSize:l}=ls(e,n,i,o,r);if(u===null)break;u&&("encoding"in u&&(o=u.encoding),i[u.name]===void 0||u.repeatable===void 0?i[u.name]={id:u.id,value:u.value,description:u.description}:(i[u.name]instanceof Array||(i[u.name]=[{id:i[u.name].id,value:i[u.name].value,description:i[u.name].description}]),i[u.name].push({id:u.id,value:u.value,description:u.description}))),n+=_n+l}return i}function ls(e,t,n,r,i){if(ps(e,t))return{tag:null,tagSize:0};let u=e.getUint16(t+1),l=e.getUint16(t+3);if(!i&&!B.iptc[u])return{tag:void 0,tagSize:l};let f=ds(e,t+_n,l),a={id:u,name:ms(B.iptc[u],u,f),value:f,description:Ss(B.iptc[u],f,n,r)};return hs(u)&&(a.repeatable=!0),Ts(u)&&(a.encoding=B.iptc[u].encoding_name(f)),{tag:a,tagSize:l}}function ps(e,t){return e.getUint8(t)!==28}function ds(e,t,n){let r=[];for(let i=0;i<n;i++)r.push(e.getUint8(t+i));return r}function ms(e,t,n){return e?gs(e)?e:Es(e)?e.name(n):e.name:`undefined-${t}`}function gs(e){return typeof e=="string"}function Es(e){return typeof e.name=="function"}function Ss(e,t,n,r){if(Is(e))try{return e.description(t,n)}catch(i){}return xs(e,t)?Ce.decode(r,t):t}function xs(e,t){return e&&t instanceof Array}function Is(e){return e&&e.description!==void 0}function hs(e){return B.iptc[e]&&B.iptc[e].repeatable}function Ts(e){return B.iptc[e]&&B.iptc[e].encoding_name!==void 0}var ae={"tiff:Orientation"(e){return e==="1"?"Horizontal (normal)":e==="2"?"Mirror horizontal":e==="3"?"Rotate 180":e==="4"?"Mirror vertical":e==="5"?"Mirror horizontal and rotate 270 CW":e==="6"?"Rotate 90 CW":e==="7"?"Mirror horizontal and rotate 90 CW":e==="8"?"Rotate 270 CW":e},"tiff:ResolutionUnit":e=>x.ResolutionUnit(parseInt(e,10)),"tiff:XResolution":e=>ee(x.XResolution,e),"tiff:YResolution":e=>ee(x.YResolution,e),"exif:ApertureValue":e=>ee(x.ApertureValue,e),"exif:GPSLatitude":An,"exif:GPSLongitude":An,"exif:FNumber":e=>ee(x.FNumber,e),"exif:FocalLength":e=>ee(x.FocalLength,e),"exif:FocalPlaneResolutionUnit":e=>x.FocalPlaneResolutionUnit(parseInt(e,10)),"exif:ColorSpace":e=>x.ColorSpace(Fs(e)),"exif:ComponentsConfiguration"(e,t){if(/^\d, \d, \d, \d$/.test(t)){let n=t.split(", ").map(r=>r.charCodeAt(0));return x.ComponentsConfiguration(n)}return t},"exif:Contrast":e=>x.Contrast(parseInt(e,10)),"exif:CustomRendered":e=>x.CustomRendered(parseInt(e,10)),"exif:ExposureMode":e=>x.ExposureMode(parseInt(e,10)),"exif:ExposureProgram":e=>x.ExposureProgram(parseInt(e,10)),"exif:ExposureTime"(e){return Pn(e)?x.ExposureTime(e.split("/").map(t=>parseInt(t,10))):e},"exif:MeteringMode":e=>x.MeteringMode(parseInt(e,10)),"exif:Saturation":e=>x.Saturation(parseInt(e,10)),"exif:SceneCaptureType":e=>x.SceneCaptureType(parseInt(e,10)),"exif:Sharpness":e=>x.Sharpness(parseInt(e,10)),"exif:ShutterSpeedValue":e=>ee(x.ShutterSpeedValue,e),"exif:WhiteBalance":e=>x.WhiteBalance(parseInt(e,10))};function ee(e,t){return Pn(t)?e(t.split("/")):t}function Fs(e){return e.substring(0,2)==="0x"?parseInt(e.substring(2),16):parseInt(e,10)}function Pn(e){return/^-?\d+\/-?\d+$/.test(e)}function An(e){let[t,n]=e.split(",");if(t!==void 0&&n!==void 0){let r=parseFloat(t),i=parseFloat(n),o=n.charAt(n.length-1);if(!Number.isNaN(r)&&!Number.isNaN(i))return""+(r+i/60)+o}return e}var Cn={get:_s};function _s(){if(typeof DOMParser!="undefined")return new DOMParser;try{let{DOMParser:e,onErrorStopParsing:t}=__non_webpack_require__("@xmldom/xmldom");return new e({onError:t})}catch(e){return}}var St={read:As};function As(e,t){let n={};if(typeof e=="string")return ye(n,e),n;let[r,i]=Ps(e,t),o=ye(n,r);if(i){let s=ye(n,i);!o&&!s&&(delete n._raw,ye(n,Et(e,t)))}return n}function Ps(e,t){if(t.length===0)return[];let n=[Et(e,t.slice(0,1))];return t.length>1&&n.push(Et(e,t.slice(1))),n}function Et(e,t){let n=t.reduce((o,s)=>o+s.length,0),r=new Uint8Array(n),i=0;for(let o=0;o<t.length;o++){let s=t[o],u=e.buffer.slice(s.dataOffset,s.dataOffset+s.length);r.set(new Uint8Array(u),i),i+=s.length}return new DataView(r.buffer)}function ye(e,t){try{let{doc:n,raw:r}=Cs(t);e._raw=(e._raw||"")+r;let i=Nn(n);return I(e,Un(yn(i,!0))),!0}catch(n){return!1}}function Cs(e){let t=Cn.get();if(!t)throw console.warn("Warning: DOMParser is not available. It is needed to be able to parse XMP tags."),new Error;let n=typeof e=="string"?e:E(e,0,e.byteLength),r=t.parseFromString(Ns(n),"application/xml");if(r.documentElement.nodeName==="parsererror")throw new Error(r.documentElement.textContent);return{doc:r,raw:n}}function Ns(e){return e.replace(/^.+(<\?xpacket begin)/,"$1").replace(/(<\?xpacket end=".*"\?>).+$/,"$1")}function Nn(e){for(let t=0;t<e.childNodes.length;t++){if(e.childNodes[t].tagName==="x:xmpmeta")return Nn(e.childNodes[t]);if(e.childNodes[t].tagName==="rdf:RDF")return e.childNodes[t]}throw new Error}function yn(e,t=!1){let n=ys(e);return Us(n)?t?{}:bs(n[0]):Os(n)}function ys(e){let t=[];for(let n=0;n<e.childNodes.length;n++)t.push(e.childNodes[n]);return t}function Us(e){return e.length===1&&e[0].nodeName==="#text"}function bs(e){return e.nodeValue}function Os(e){let t={};return e.forEach(n=>{if(Ds(n)){let r=Rs(n);t[n.nodeName]!==void 0?(Array.isArray(t[n.nodeName])||(t[n.nodeName]=[t[n.nodeName]]),t[n.nodeName].push(r)):t[n.nodeName]=r}}),t}function Ds(e){return e.nodeName&&e.nodeName!=="#text"}function Rs(e){return{attributes:Ls(e),value:yn(e)}}function Ls(e){let t={};for(let n=0;n<e.attributes.length;n++)t[e.attributes[n].nodeName]=decodeURIComponent(escape(e.attributes[n].value));return t}function Un(e){let t={};if(typeof e=="string")return e;for(let n in e){let r=e[n];Array.isArray(r)||(r=[r]),r.forEach(i=>{I(t,xt(i.attributes)),typeof i.value=="object"&&I(t,bn(i.value))})}return t}function xt(e){let t={};for(let n in e)try{Ms(n)&&(t[be(n)]={value:e[n],attributes:{},description:G(e[n],n)})}catch(r){}return t}function Ms(e){return e!=="rdf:parseType"&&!Ue(e)}function Ue(e){return e.split(":")[0]==="xmlns"}function be(e){return/^MicrosoftPhoto(_\d+_)?:Rating$/i.test(e)?"RatingPercent":e.split(":")[1]}function G(e,t=void 0){if(Array.isArray(e)){let n=Bs(e);return t&&typeof ae[t]=="function"?ae[t](e,n):n}if(typeof e=="object")return Gs(e);try{return t&&typeof ae[t]=="function"?ae[t](e):decodeURIComponent(escape(e))}catch(n){return e}}function Bs(e){return e.map(t=>t.value!==void 0?G(t.value):G(t)).join(", ")}function Gs(e){let t=[];for(let n in e)t.push(`${ks(n)}: ${G(e[n].value)}`);return t.join("; ")}function ks(e){return e==="CiAdrCity"?"CreatorCity":e==="CiAdrCtry"?"CreatorCountry":e==="CiAdrExtadr"?"CreatorAddress":e==="CiAdrPcode"?"CreatorPostalCode":e==="CiAdrRegion"?"CreatorRegion":e==="CiEmailWork"?"CreatorWorkEmail":e==="CiTelWork"?"CreatorWorkPhone":e==="CiUrlWork"?"CreatorWorkUrl":e}function bn(e){let t={};for(let n in e)try{Ue(n)||(t[be(n)]=Hs(e[n],n))}catch(r){}return t}function Hs(e,t){return Xs(e)?Ys(e,t):Zs(e)?{value:"",attributes:{},description:""}:On(e)?Dn(e,t):Rn(e)?Ln(e,t):Mn(e)?Bn(e,t):Ws(e)?$s(e,t):It(e,t)}function Zs(e){return e.attributes["rdf:parseType"]==="Resource"&&typeof e.value=="string"&&e.value.trim()===""}function Xs(e){return Array.isArray(e)}function Ys(e,t){return It(e[e.length-1],t)}function On(e){return e.attributes["rdf:parseType"]==="Resource"&&e.value["rdf:value"]!==void 0||e.value["rdf:Description"]!==void 0&&e.value["rdf:Description"].value["rdf:value"]!==void 0}function Dn(e,t){let n=le(e);e.value["rdf:Description"]!==void 0&&(e=e.value["rdf:Description"]),I(n,le(e),zs(e));let r=Ks(e);return{value:r,attributes:n,description:G(r,t)}}function le(e){let t={};for(let n in e.attributes)n!=="rdf:parseType"&&n!=="rdf:resource"&&!Ue(n)&&(t[be(n)]=e.attributes[n]);return t}function zs(e){let t={};for(let n in e.value)n!=="rdf:value"&&!Ue(n)&&(t[be(n)]=e.value[n].value);return t}function Ks(e){return kn(e.value["rdf:value"])||e.value["rdf:value"].value}function Rn(e){return e.attributes["rdf:parseType"]==="Resource"||e.value["rdf:Description"]!==void 0&&e.value["rdf:Description"].value["rdf:value"]===void 0}function Ln(e,t){let n={value:{},attributes:{}};return e.value["rdf:Description"]!==void 0&&(I(n.value,xt(e.value["rdf:Description"].attributes)),I(n.attributes,le(e)),e=e.value["rdf:Description"]),I(n.value,bn(e.value)),n.description=G(n.value,t),n}function Mn(e){return Object.keys(e.value).length===0&&e.attributes["xml:lang"]===void 0&&e.attributes["rdf:resource"]===void 0}function Bn(e,t){let n=xt(e.attributes);return{value:n,attributes:{},description:G(n,t)}}function Ws(e){return Gn(e.value)!==void 0}function Gn(e){return e["rdf:Bag"]||e["rdf:Seq"]||e["rdf:Alt"]}function $s(e,t){let n=Gn(e.value).value["rdf:li"],r=le(e),i=[];return n===void 0?n=[]:Array.isArray(n)||(n=[n]),n.forEach(o=>{i.push(js(o))}),{value:i,attributes:r,description:G(i,t)}}function js(e){return On(e)?Dn(e):Rn(e)?Ln(e).value:Mn(e)?Bn(e).value:It(e)}function It(e,t){let n=kn(e)||Un(e.value);return{value:n,attributes:le(e),description:G(n,t)}}function kn(e){return e.attributes&&e.attributes["rdf:resource"]}var k={CLOSED_SUBPATH_LENGTH:0,CLOSED_SUBPATH_BEZIER_LINKED:1,CLOSED_SUBPATH_BEZIER_UNLINKED:2,OPEN_SUBPATH_LENGTH:3,OPEN_SUBPATH_BEZIER_LINKED:4,OPEN_SUBPATH_BEZIER_UNLINKED:5,FILL_RULE:6,CLIPBOARD:7,INITIAL_FILL_RULE:8},Hn=24,De={2e3:{name:"PathInformation",description:vs},2999:{name:"ClippingPathName",description(e){let[,t]=me(e,0);return t}}};function vs(e){let n={},r=[];for(let i=0;i<e.byteLength;i+=2+Hn){let o=c.getShortAt(e,i);ht[o]&&(n[o]||(n[o]=ht[o].description),r.push({type:o,path:ht[o].path(e,i+2)}))}return JSON.stringify({types:n,paths:r})}var ht={[k.CLOSED_SUBPATH_LENGTH]:{description:"Closed subpath length",path:(e,t)=>[c.getShortAt(e,t)]},[k.CLOSED_SUBPATH_BEZIER_LINKED]:{description:"Closed subpath Bezier knot, linked",path:Oe},[k.CLOSED_SUBPATH_BEZIER_UNLINKED]:{description:"Closed subpath Bezier knot, unlinked",path:Oe},[k.OPEN_SUBPATH_LENGTH]:{description:"Open subpath length",path:(e,t)=>[c.getShortAt(e,t)]},[k.OPEN_SUBPATH_BEZIER_LINKED]:{description:"Open subpath Bezier knot, linked",path:Oe},[k.OPEN_SUBPATH_BEZIER_UNLINKED]:{description:"Open subpath Bezier knot, unlinked",path:Oe},[k.FILL_RULE]:{description:"Path fill rule",path:()=>[]},[k.INITIAL_FILL_RULE]:{description:"Initial fill rule",path:(e,t)=>[c.getShortAt(e,t)]},[k.CLIPBOARD]:{description:"Clipboard",path:Js}};function Oe(e,t){let r=[];for(let i=0;i<Hn;i+=8)r.push(ws(e,t+i));return r}function ws(e,t){let n=w(e,t,8);return[w(e,t+4,8),n]}function Js(e,t){return[[w(e,t,8),w(e,t+4,8),w(e,t+8,8),w(e,t+12,8)],w(e,t+16,8)]}function w(e,t,n){let r=c.getLongAt(e,t),i=r>>>31?-1:1,o=(r&2130706432)>>>32-n,s=r&parseInt(Xe("1",32-n),2);return i*Lt(o.toString(2)+"."+Rt(s.toString(2),32-n,"0"),2)}var Xn={read:Vs},Yn="8BIM",qs=2,Qs=4,Zn=Yn.length;function Vs(e,t){let n=Ze(new Uint8Array(e).buffer),r={},i=0;for(;i<e.length;){let o=E(n,i,Zn);i+=Zn;let s=c.getShortAt(n,i);i+=qs;let{tagName:u,tagNameSize:l}=eu(n,i);i+=l;let f=c.getLongAt(n,i);if(i+=Qs,o===Yn){let a=Ze(n.buffer,i,f),m={id:s,value:E(a,0,f)};if(De[s]){try{m.description=De[s].description(a)}catch(g){m.description="<no description formatter>"}r[u||De[s].name]=m}else t&&(r[`undefined-${s}`]=m)}i+=f+f%2}return r}function eu(e,t){let[n,r]=me(e,t);return{tagName:r,tagNameSize:1+n+(n%2===0?1:0)}}var Ft={desc:{name:"ICC Description"},cprt:{name:"ICC Copyright"},dmdd:{name:"ICC Device Model Description"},vued:{name:"ICC Viewing Conditions Description"},dmnd:{name:"ICC Device Manufacturer for Display"},tech:{name:"Technology"}},_t={4:{name:"Preferred CMM type",value:(e,t)=>E(e,t,4),description:e=>e!==null?Tt(e):""},8:{name:"Profile Version",value:(e,t)=>e.getUint8(t).toString(10)+"."+(e.getUint8(t+1)>>4).toString(10)+"."+(e.getUint8(t+1)%16).toString(10)},12:{name:"Profile/Device class",value:(e,t)=>E(e,t,4),description:e=>{switch(e.toLowerCase()){case"scnr":return"Input Device profile";case"mntr":return"Display Device profile";case"prtr":return"Output Device profile";case"link":return"DeviceLink profile";case"abst":return"Abstract profile";case"spac":return"ColorSpace profile";case"nmcl":return"NamedColor profile";case"cenc":return"ColorEncodingSpace profile";case"mid ":return"MultiplexIdentification profile";case"mlnk":return"MultiplexLink profile";case"mvis":return"MultiplexVisualization profile";default:return e}}},16:{name:"Color Space",value:(e,t)=>E(e,t,4)},20:{name:"Connection Space",value:(e,t)=>E(e,t,4)},24:{name:"ICC Profile Date",value:(e,t)=>tu(e,t).toISOString()},36:{name:"ICC Signature",value:(e,t)=>nu(e.buffer.slice(t,t+4))},40:{name:"Primary Platform",value:(e,t)=>E(e,t,4),description:e=>Tt(e)},48:{name:"Device Manufacturer",value:(e,t)=>E(e,t,4),description:e=>Tt(e)},52:{name:"Device Model Number",value:(e,t)=>E(e,t,4)},64:{name:"Rendering Intent",value:(e,t)=>e.getUint32(t),description:e=>{switch(e){case 0:return"Perceptual";case 1:return"Relative Colorimetric";case 2:return"Saturation";case 3:return"Absolute Colorimetric";default:return e}}},80:{name:"Profile Creator",value:(e,t)=>E(e,t,4)}};function tu(e,t){let n=e.getUint16(t),r=e.getUint16(t+2)-1,i=e.getUint16(t+4),o=e.getUint16(t+6),s=e.getUint16(t+8),u=e.getUint16(t+10);return new Date(Date.UTC(n,r,i,o,s,u))}function nu(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function Tt(e){switch(e.toLowerCase()){case"appl":return"Apple";case"adbe":return"Adobe";case"msft":return"Microsoft";case"sunw":return"Sun Microsystems";case"sgi":return"Silicon Graphics";case"tgnt":return"Taligent";default:return e}}var At={read:lu},ru=84,iu=128,ou="acsp",su="desc",uu="mluc",cu="text",fu="sig ",au=12;function lu(e,t,n){return n&&t[0].compressionMethod!==J?pu(e,t):mu(e,t)}function pu(e,t){if(!du(t[0].compressionMethod))return{};let n=new DataView(e.buffer.slice(t[0].offset,t[0].offset+t[0].length));return Se(n,t[0].compressionMethod,"utf-8","dataview").then(zn).catch(()=>({}))}function du(e){return e===Ye}function mu(e,t){try{let n=t.reduce((s,u)=>s+u.length,0),r=new Uint8Array(n),i=0,o=gu(e);for(let s=1;s<=t.length;s++){let u=t.find(a=>a.chunkNumber===s);if(!u)throw new Error(`ICC chunk ${s} not found`);let l=o.slice(u.offset,u.offset+u.length),f=new Uint8Array(l);r.set(f,i),i+=f.length}return zn(new DataView(r.buffer))}catch(n){return{}}}function gu(e){return Array.isArray(e)?new DataView(Uint8Array.from(e).buffer).buffer:e.buffer}function Eu(e){return e.length<iu+4}function Su(e,t){return e.length<t+au}function zn(e){let t=e.buffer,n=e.getUint32();if(e.byteLength!==n)throw new Error("ICC profile length not matching");if(e.length<ru)throw new Error("ICC profile too short");let r={},i=Object.keys(_t);for(let l=0;l<i.length;l++){let f=i[l],a=_t[f],m=a.value(e,parseInt(f,10)),g=m;a.description&&(g=a.description(m)),r[a.name]={value:m,description:g}}if(Re(t.slice(36,40))!==ou)throw new Error("ICC profile: missing signature");if(Eu(t))return r;let s=e.getUint32(128),u=132;for(let l=0;l<s;l++){if(Su(t,u))return r;let f=E(e,u,4),a=e.getUint32(u+4),m=e.getUint32(u+8);if(a>t.length)return r;let g=E(e,a,4);if(g===su){let S=e.getUint32(a+8);if(S>m)return r;let A=Re(t.slice(a+12,a+S+11));pe(r,f,A)}else if(g===uu){let S=e.getUint32(a+8),A=e.getUint32(a+12),P=a+16,_=[];for(let y=0;y<S;y++){let U=E(e,P+0,2),h=E(e,P+2,2),K=e.getUint32(P+4),W=e.getUint32(P+8),$=Ot(e,a+W,K);_.push({languageCode:U,countryCode:h,text:$}),P+=A}if(S===1)pe(r,f,_[0].text);else{let y={};for(let U=0;U<_.length;U++)y[`${_[U].languageCode}-${_[U].countryCode}`]=_[U].text;pe(r,f,y)}}else if(g===cu){let S=Re(t.slice(a+8,a+m-7));pe(r,f,S)}else if(g===fu){let S=Re(t.slice(a+8,a+12));pe(r,f,S)}u=u+12}return r}function Re(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function pe(e,t,n){Ft[t]?e[Ft[t].name]={value:n,description:n}:e[t]={value:n,description:n}}var Le=27,Kn={read:xu,SHOT_INFO_AUTO_ROTATE:Le};function xu(e,t,n,r,i){let o=R(e,lt,t,t+n,r,i);return o.ShotInfo&&(o=I({},o,Iu(o.ShotInfo.value)),delete o.ShotInfo),o}function Iu(e){let t={};return e[Le]!==void 0&&(t.AutoRotate={value:e[Le],description:hu(e[Le])}),t}function hu(e){return e===0?"None":e===1?"Rotate 90 CW":e===2?"Rotate 180":e===3?"Rotate 270 CW":"Unknown"}var Wn={read:Tu};function Tu(e,t){return{"Image Width":Fu(e,t),"Image Height":_u(e,t),"Bit Depth":Au(e,t),"Color Type":Pu(e,t),Compression:Cu(e,t),Filter:Nu(e,t),Interlace:yu(e,t)}}function Fu(e,t){if(t+0+4>e.byteLength)return;let i=c.getLongAt(e,t);return{value:i,description:`${i}px`}}function _u(e,t){if(t+4+4>e.byteLength)return;let i=c.getLongAt(e,t+4);return{value:i,description:`${i}px`}}function Au(e,t){if(t+8+1>e.byteLength)return;let i=c.getByteAt(e,t+8);return{value:i,description:`${i}`}}function Pu(e,t){let i={0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha"};if(t+9+1>e.byteLength)return;let o=c.getByteAt(e,t+9);return{value:o,description:i[o]||"Unknown"}}function Cu(e,t){if(t+10+1>e.byteLength)return;let i=c.getByteAt(e,t+10);return{value:i,description:i===0?"Deflate/Inflate":"Unknown"}}function Nu(e,t){if(t+11+1>e.byteLength)return;let i=c.getByteAt(e,t+11);return{value:i,description:i===0?"Adaptive":"Unknown"}}function yu(e,t){let i={0:"Noninterlaced",1:"Adam7 Interlace"};if(t+12+1>e.byteLength)return;let o=c.getByteAt(e,t+12);return{value:o,description:i[o]||"Unknown"}}var Jn={read:Du},Ct="STATE_KEYWORD",Nt="STATE_COMPRESSION",yt="STATE_LANG",qn="STATE_TRANSLATED_KEYWORD",Ut="STATE_TEXT",Uu=1,bu=1,Ou=6;function Du(e,t,n,r){let i={},o=[];for(let s=0;s<t.length;s++){let{offset:u,length:l,type:f}=t[s],a=Ru(e,u,l,f,n);if(a instanceof Promise)o.push(a.then(({name:m,value:g,description:S})=>{try{if(p.USE_EXIF&&jn(m,g))return{__exif:Pe.read(wn(g),Ou,r).tags};if(p.USE_IPTC&&vn(m,g))return{__iptc:fe.read(wn(g),0,r)};if(m&&!jn(m,g)&&!vn(m,g))return{[m]:{value:g,description:S}}}catch(A){}return{}}));else{let{name:m,value:g,description:S}=a;m&&(i[m]={value:g,description:S})}}return{readTags:i,readTagsPromise:o.length>0?Promise.all(o):void 0}}function Ru(e,t,n,r,i){let o=[],s=[],u=[],l,f=Ct,a=J;for(let g=0;g<n&&t+g<e.byteLength;g++){if(f===Nt){a=Lu({type:r,dataView:e,offset:t+g}),r===Y&&(g+=Uu),f=$n(r,f);continue}else if(f===Ut){l=new DataView(e.buffer.slice(t+g,t+n));break}let S=e.getUint8(t+g);S===0?f=$n(r,f):f===Ct?o.push(S):f===yt?s.push(S):f===qn&&u.push(S)}if(a!==J&&!i)return{};let m=Se(l,a,Mu(r));return m instanceof Promise?m.then(g=>Pt(g,r,s,o)).catch(()=>Pt("<text using unknown compression>".split(""),r,s,o)):Pt(m,r,s,o)}function Lu({type:e,dataView:t,offset:n}){if(e===Y){if(t.getUint8(n)===bu)return t.getUint8(n+1)}else if(e===ie)return t.getUint8(n);return J}function $n(e,t){return t===Ct&&[Y,ie].includes(e)?Nt:t===Nt?e===Y?yt:Ut:t===yt?qn:Ut}function Mu(e){return e===Ie||e===ie?"latin1":"utf-8"}function Pt(e,t,n,r){let i=Gu(e);return{name:Bu(t,n,r),value:i,description:t===Y?ku(e):i}}function Bu(e,t,n){let r=X(n);if(e===Ie||t.length===0)return r;let i=X(t);return`${r} (${i})`}function Gu(e){return e instanceof DataView?E(e,0,e.byteLength):e}function ku(e){return Ce.decode("UTF-8",e)}function jn(e,t){return e.toLowerCase()==="raw profile type exif"&&t.substring(1,5)==="exif"}function vn(e,t){return e.toLowerCase()==="raw profile type iptc"&&t.substring(1,5)==="iptc"}function wn(e){let t=e.match(/\n(exif|iptc)\n\s*\d+\n([\s\S]*)$/);return Hu(t[2].replace(/\n/g,""))}function Hu(e){let t=new DataView(new ArrayBuffer(e.length/2));for(let n=0;n<e.length;n+=2)t.setUint8(n/2,parseInt(e.substring(n,n+2),16));return t}var Qn={read:Zu};function Zu(e,t){let n={};for(let r=0;r<t.length;r++){let i=c.getLongAt(e,t[r]+v),o=E(e,t[r]+L,O);o===Je?(n["Pixels Per Unit X"]=Xu(e,t[r],i),n["Pixels Per Unit Y"]=Yu(e,t[r],i),n["Pixel Units"]=zu(e,t[r],i)):o===qe&&(n["Modify Date"]=Ku(e,t[r],i))}return n}function Xu(e,t,n){if(!Me(e,t,n,0,4))return;let o=c.getLongAt(e,t+C+0);return{value:o,description:""+o}}function Yu(e,t,n){if(!Me(e,t,n,4,4))return;let o=c.getLongAt(e,t+C+4);return{value:o,description:""+o}}function zu(e,t,n){if(!Me(e,t,n,8,1))return;let o=c.getByteAt(e,t+C+8);return{value:o,description:o===1?"meters":"Unknown"}}function Ku(e,t,n){if(!Me(e,t,n,0,7))return;let i=c.getShortAt(e,t+C),o=c.getByteAt(e,t+C+2),s=c.getByteAt(e,t+C+3),u=c.getByteAt(e,t+C+4),l=c.getByteAt(e,t+C+5),f=c.getByteAt(e,t+C+6);return{value:[i,o,s,u,l,f],description:`${te(i,4)}-${te(o,2)}-${te(s,2)} ${te(u,2)}:${te(l,2)}:${te(f,2)}`}}function Me(e,t,n,r,i){return r+i<=n&&t+C+r+i<=e.byteLength}function te(e,t){return`${"0".repeat(t-(""+e).length)}${e}`}var er={read:ju},Wu=4,$u=7;function ju(e,t){let n={},r=c.getByteAt(e,t);return n.Alpha=vu(r),n.Animation=wu(r),n.ImageWidth=Vn(e,t+Wu),n.ImageHeight=Vn(e,t+$u),n}function vu(e){let t=e&16;return{value:t?1:0,description:t?"Yes":"No"}}function wu(e){let t=e&2;return{value:t?1:0,description:t?"Yes":"No"}}function Vn(e,t){let n=c.getByteAt(e,t)+256*c.getByteAt(e,t+1)+65536*c.getByteAt(e,t+2)+1;return{value:n,description:n+"px"}}var tr={read:Ju};function Ju(e){return{"GIF Version":qu(e),"Image Width":Qu(e),"Image Height":Vu(e),"Global Color Map":ec(e),"Bits Per Pixel":nc(e),"Color Resolution Depth":tc(e)}}function qu(e){if(3+3>e.byteLength)return;let r=E(e,3,3);return{value:r,description:r}}function Qu(e){if(6+2>e.byteLength)return;let r=e.getUint16(6,!0);return{value:r,description:`${r}px`}}function Vu(e){if(8+2>e.byteLength)return;let r=e.getUint16(8,!0);return{value:r,description:`${r}px`}}function ec(e){if(10+1>e.byteLength)return;let i=(e.getUint8(10)&128)>>>7;return{value:i,description:i===1?"Yes":"No"}}function tc(e){if(10+1>e.byteLength)return;let i=((e.getUint8(10)&112)>>>4)+1;return{value:i,description:`${i} ${i===1?"bit":"bits"}`}}function nc(e){if(10+1>e.byteLength)return;let i=(e.getUint8(10)&7)+1;return{value:i,description:`${i} ${i===1?"bit":"bits"}`}}var rc=[6,7,99],nr={get:ic};function ic(e,t,n){if(oc(t)){t.type="image/jpeg";let r=n+t.JPEGInterchangeFormat.value;t.image=e.buffer.slice(r,r+t.JPEGInterchangeFormatLength.value),ge(t,"base64",function(){return Ee(this.image)})}return t}function oc(e){return e&&(e.Compression===void 0||rc.includes(e.Compression.value))&&e.JPEGInterchangeFormat&&e.JPEGInterchangeFormat.value&&e.JPEGInterchangeFormatLength&&e.JPEGInterchangeFormatLength.value}function rr(e){this.name="MetadataMissingError",this.message=e||"No Exif data",this.stack=new Error().stack}rr.prototype=new Error;var ir={MetadataMissingError:rr};function cr(e,t={}){return sc(e)?(t.async=!0,uc(e,t).then(n=>bt(n,t))):mc(e)?(t.async=!0,gc(e).then(n=>bt(n,t))):bt(e,t)}function sc(e){return typeof e=="string"}function uc(e,t){return/^\w+:\/\//.test(e)?typeof fetch!="undefined"?cc(e,t):fc(e,t):lc(e)?Promise.resolve(Dt(e)):pc(e,t)}function cc(e,{length:t}={}){let n={method:"GET"};return Number.isInteger(t)&&t>=0&&(n.headers={range:`bytes=0-${t-1}`}),fetch(e,n).then(r=>r.arrayBuffer())}function fc(e,{length:t}={}){return new Promise((n,r)=>{let i={};Number.isInteger(t)&&t>=0&&(i.headers={range:`bytes=0-${t-1}`}),ac(e)(e,i,s=>{if(s.statusCode>=200&&s.statusCode<=299){let u=[];s.on("data",l=>u.push(Buffer.from(l))),s.on("error",l=>r(l)),s.on("end",()=>n(Buffer.concat(u)))}else r(`Could not fetch file: ${s.statusCode} ${s.statusMessage}`),s.resume()}).on("error",s=>r(s))})}function ac(e){return/^https:\/\//.test(e)?__non_webpack_require__("https").get:__non_webpack_require__("http").get}function lc(e){return/^data:[^;,]*(;base64)?,/.test(e)}function pc(e,{length:t}={}){return new Promise((n,r)=>{let i=dc();i.open(e,(o,s)=>{o?r(o):i.stat(e,(u,l)=>{if(u)r(u);else{let f=Math.min(l.size,t!==void 0?t:l.size),a=Buffer.alloc(f),m={buffer:a,length:f};i.read(s,m,g=>{g?r(g):i.close(s,S=>{S&&console.warn(`Could not close file ${e}:`,S),n(a)})})}})})})}function dc(){try{return __non_webpack_require__("fs")}catch(e){return}}function mc(e){return typeof window!="undefined"&&typeof File!="undefined"&&e instanceof File}function gc(e){return new Promise((t,n)=>{let r=new FileReader;r.onload=i=>t(i.target.result),r.onerror=()=>n(r.error),r.readAsArrayBuffer(e)})}function bt(e,t){return Ec(e)&&(e=new Uint8Array(e).buffer),xc(Sc(e),t)}function Ec(e){try{return Buffer.isBuffer(e)}catch(t){return!1}}function Sc(e){try{return new DataView(e)}catch(t){return new j(e)}}function xc(e,{expanded:t=!1,async:n=!1,includeUnknown:r=!1}={expanded:!1,async:!1,includeUnknown:!1}){let i=!1,o={},s=[],{fileType:u,fileDataOffset:l,jfifDataOffset:f,tiffHeaderOffset:a,iptcDataOffset:m,xmpChunks:g,iccChunks:S,mpfDataOffset:A,pngHeaderOffset:P,pngTextChunks:_,pngChunkOffsets:y,vp8xChunkOffset:U,gifHeaderOffset:h}=tn.parseAppMarkers(e,n);if(p.USE_JPEG&&p.USE_FILE&&Ic(l)){i=!0;let d=Sn.read(e,l);t?o.file=d:o=I({},o,d)}if(p.USE_JPEG&&p.USE_JFIF&&hc(f)){i=!0;let d=xn.read(e,f);t?o.jfif=d:o=I({},o,d)}if(p.USE_EXIF&&Tc(a)){i=!0;let{tags:d,byteOrder:H}=Pe.read(e,a,r);if(d.Thumbnail&&(o.Thumbnail=d.Thumbnail,delete d.Thumbnail),t?(o.exif=d,Fc(o)):o=I({},o,d),p.USE_TIFF&&p.USE_IPTC&&d["IPTC-NAA"]&&!or(m)){let F=fe.read(d["IPTC-NAA"].value,0,r);t?o.iptc=F:o=I({},o,F)}if(p.USE_TIFF&&p.USE_XMP&&d.ApplicationNotes&&!sr(g)){let F=St.read(X(d.ApplicationNotes.value));t?o.xmp=F:(delete F._raw,o=I({},o,F))}if(p.USE_PHOTOSHOP&&d.ImageSourceData){let F=Xn.read(d.PhotoshopSettings.value,r);t?o.photoshop=F:o=I({},o,F)}if(p.USE_TIFF&&p.USE_ICC&&d.ICC_Profile&&!ur(S)){let F=At.read(d.ICC_Profile.value,[{offset:0,length:d.ICC_Profile.value.length,chunkNumber:1,chunksTotal:1}]);t?o.icc=F:o=I({},o,F)}if(p.USE_MAKER_NOTES&&_c(d)){let F=Kn.read(e,a,d.MakerNote.__offset,H,r);t?o.makerNotes=F:o=I({},o,F)}d.MakerNote&&delete d.MakerNote.__offset}if(p.USE_JPEG&&p.USE_IPTC&&or(m)){i=!0;let d=fe.read(e,m,r);t?o.iptc=d:o=I({},o,d)}if(p.USE_XMP&&sr(g)){i=!0;let d=St.read(e,g);t?o.xmp=d:(delete d._raw,o=I({},o,d))}if((p.USE_JPEG||p.USE_WEBP)&&p.USE_ICC&&ur(S)){i=!0;let d=At.read(e,S,n);d instanceof Promise?s.push(d.then(W)):W(d)}if(p.USE_MPF&&Ac(A)){i=!0;let d=En.read(e,A,r);t?o.mpf=d:o=I({},o,d)}if(p.USE_PNG&&p.USE_PNG_FILE&&Pc(P)){i=!0;let d=Wn.read(e,P);t?(o.png=o.png?I({},o.png,d):d,o.pngFile=d):o=I({},o,d)}if(p.USE_PNG&&Cc(_)){i=!0;let{readTags:d,readTagsPromise:H}=Jn.read(e,_,n,r);$(d),H&&s.push(H.then(F=>F.forEach($)))}if(p.USE_PNG&&Nc(y)){i=!0;let d=Qn.read(e,y);t?o.png=o.png?I({},o.png,d):d:o=I({},o,d)}if(p.USE_WEBP&&yc(U)){i=!0;let d=er.read(e,U);t?o.riff=o.riff?I({},o.riff,d):d:o=I({},o,d)}if(p.USE_GIF&&Uc(h)){i=!0;let d=tr.read(e,h);t?o.gif=o.gif?I({},o.gif,d):d:o=I({},o,d)}let K=(p.USE_JPEG||p.USE_WEBP)&&p.USE_EXIF&&p.USE_THUMBNAIL&&nr.get(e,o.Thumbnail,a);if(K?(i=!0,o.Thumbnail=K):delete o.Thumbnail,u&&(t?(o.file||(o.file={}),o.file.FileType=u):o.FileType=u,i=!0),!i)throw new ir.MetadataMissingError;if(n)return Promise.all(s).then(()=>o);return o;function W(d){t?o.icc=d:o=I({},o,d)}function $(d){if(t){for(let H of["exif","iptc"]){let F=`__${H}`;d[F]&&(o[H]=o[H]?I({},o.exif,d[F]):d[F],delete d[F])}o.png=o.png?I({},o.png,d):d,o.pngText=o.pngText?I({},o.png,d):d}else o=I({},o,d.__exif?d.__exif:{},d.__iptc?d.__iptc:{},d),delete o.__exif,delete o.__iptc}}function Ic(e){return e!==void 0}function hc(e){return e!==void 0}function Tc(e){return e!==void 0}function Fc(e){if(e.exif){if(e.exif.GPSLatitude&&e.exif.GPSLatitudeRef)try{e.gps=e.gps||{},e.gps.Latitude=q(e.exif.GPSLatitude.value),e.exif.GPSLatitudeRef.value.join("")==="S"&&(e.gps.Latitude=-e.gps.Latitude)}catch(t){}if(e.exif.GPSLongitude&&e.exif.GPSLongitudeRef)try{e.gps=e.gps||{},e.gps.Longitude=q(e.exif.GPSLongitude.value),e.exif.GPSLongitudeRef.value.join("")==="W"&&(e.gps.Longitude=-e.gps.Longitude)}catch(t){}if(e.exif.GPSAltitude&&e.exif.GPSAltitudeRef)try{e.gps=e.gps||{},e.gps.Altitude=e.exif.GPSAltitude.value[0]/e.exif.GPSAltitude.value[1],e.exif.GPSAltitudeRef.value===1&&(e.gps.Altitude=-e.gps.Altitude)}catch(t){}}}function or(e){return e!==void 0}function sr(e){return Array.isArray(e)&&e.length>0}function ur(e){return Array.isArray(e)&&e.length>0}function _c(e){return e.Make&&e.Make.value&&Array.isArray(e.Make.value)&&e.Make.value[0]==="Canon"&&e.MakerNote&&e.MakerNote.__offset}function Ac(e){return e!==void 0}function Pc(e){return e!==void 0}function Cc(e){return e!==void 0}function Nc(e){return e!==void 0}function yc(e){return e!==void 0}function Uc(e){return e!==void 0}var ne="file-info-view",de=class extends Be.ItemView{constructor(t){super(t)}getViewType(){return ne}getIcon(){return"info"}getDisplayText(){return"File info"}async onClose(){}async onOpen(){await this.refreshFileInfo()}formatFileSize(t){let n=["bytes","KB","MB","GB"],r=t,i=0;for(;r>=1e3&&i<n.length-1;)r/=1e3,i++;return`${i===0?Math.round(r):Math.round(r*100)/100} ${n[i]}`}async refreshFileInfo(){var l,f,a,m;let{workspace:t}=this.app,{vault:n}=this.app,r=(g,S)=>{let P=s.createDiv("tree-item").createDiv("tree-item-self is-clickable");P.createDiv({cls:"tree-item-inner",text:g}),P.createDiv("tree-item-flair-outer").createSpan({cls:"tree-item-flair",text:S}).setAttribute("title",S),P.addEventListener("click",async()=>{await navigator.clipboard.writeText(S),new Be.Notice(`Copied ${g.toLowerCase()} to clipboard`)})},i=g=>{s.createDiv("tree-item file-info-header").createDiv("tree-item-self").createDiv({cls:"tree-item-inner",text:g})},o=this.containerEl.children[1];o.empty();let s=o.createDiv("file-info-pane"),u=t.getActiveFile();if(u){i("General"),r("File name",u.name),r("Vault path",u.path);let g=u.stat,S=new Date(g.ctime),A=new Date(g.mtime);if(r("Created",S.toLocaleString()),r("Modified",A.toLocaleString()),r("Size",this.formatFileSize(g.size)),[".png",".jpg",".jpeg",".gif",".bmp",".svg",".webp"].some(_=>u.path.toLowerCase().endsWith(_))){let _=await n.readBinary(u),y=new Blob([_]),U=URL.createObjectURL(y),h=cr(_);i("Image"),h!=null&&h.FileType&&r("Format",h.FileType.description);let K=(l=h==null?void 0:h["Image Width"])!=null?l:h==null?void 0:h.ImageWidth,W=(f=h==null?void 0:h["Image Height"])!=null?f:h==null?void 0:h.ImageHeight;K&&W&&(r("Width",K.description),r("Height",W.description));let $=(m=(a=h==null?void 0:h.ColorSpace)!=null?a:h==null?void 0:h["Color Space"])!=null?m:h==null?void 0:h["Color Type"];$&&r("Color space",$.description),URL.revokeObjectURL(U)}}else i("No file open")}};var Ge=class extends ke.Plugin{constructor(){super(...arguments);this.REFRESH_INTERVAL=5e3}async onload(){this.debouncedRefresh=(0,ke.debounce)(()=>this.refreshViews(),this.REFRESH_INTERVAL,!1),this.registerView(ne,n=>new de(n)),this.addCommand({id:"show-file-info",name:"Show file info",callback:async()=>{await this.app.workspace.ensureSideLeaf(ne,"right",{reveal:!0})}}),this.app.workspace.onLayoutReady(async()=>{await this.app.workspace.ensureSideLeaf(ne,"right",{reveal:!1,active:!1})}),this.registerEvent(this.app.workspace.on("file-open",()=>{this.refreshViews()})),this.registerEvent(this.app.vault.on("modify",n=>{let r=this.app.workspace.getActiveFile();n===r&&this.debouncedRefresh()}))}refreshViews(){this.app.workspace.getLeavesOfType(ne).forEach(r=>{r.view instanceof de&&r.view.refreshFileInfo()})}};

/* nosourcemap */