---
cssclasses:
  - fullwidth
obsidianUIMode: preview
type: query
tags:
  - favorite
---

```dataviewjs
dv.view("task-heatmap", { 
  theme: "light",
  showTitle: false,
  color: "blue",
  year: 2025
   })
```

```dataviewjs
const allTasks = dv.pages().where(p => !p.file.path.includes("900 Assets")).file.tasks;

const stats = [
    { label: "Vault Todo", count: allTasks.filter(t => !t.completed && t.status === " " && !t.text.includes("#exclude")).length },
    { label: "Postponed", count: allTasks.filter(t => t.status === ">" && !t.text.includes("#exclude")).length },
    { label: "Information", count: allTasks.filter(t => ["i","n","!"].includes(t.status) && !t.text.includes("#exclude")).length },
    { label: "Cancelled", count: allTasks.filter(t => ["/","-"].includes(t.status) && !t.text.includes("#exclude")).length },
    { label: "Vault Done", count: allTasks.filter(t => (t.completed || ["x","X"].includes(t.status)) && !t.text.includes("#exclude")).length }
];

const statsHtml = `<div class="custom-stat-cards" style="display:grid; grid-template-columns:repeat(5,1fr); gap:10px; text-align:center; margin-bottom:20px;">`
    + stats.map(s => `<div style="background:var(--background-secondary); padding:10px; border-radius:8px; border:1px solid var(--background-modifier-border)">
        <div style="font-size:0.75em; color:var(--text-muted); text-transform:uppercase;">${s.label}</div>
        <div style="font-size:1.6em; font-weight:bold; color:#4eb06d">${s.count}</div>
    </div>`).join("") + `</div>`;
dv.el("div", statsHtml, { raw: true });
```

```dataviewjs
dv.view("tabTaskView", {
    tabs: [
        { name: "Inbox", folder: "000 Inbox", status: " " },
        { name: "Projects", folder: "100 Projects", status: " " },
        { name: "Areas", folder: "200 Areas", status: " " },
        { name: "Resources", folder: "300 Resources", status: " " },
        { name: "Archive", folder: "400 Archive", status: " " },
        { name: "Journal", folder: "500 Journal", status: " " },
        { name: "Zettelkasten", folder: "600 Zettelkasten", status: " " }
    ]
});
```

>[!warning]- Overdue Tasks
>```tasks
>not done
>filter by function task.status.symbol === ' '
>due before tomorrow
>group by filename
>hide backlink
>```

>[!tip]- Active Tasks
>```tasks
>not done
>filter by function task.status.symbol === ' '
>(starts before tomorrow) AND (due after yesterday)
>is not blocked
>group by path
>short mode
>```

---

## 每月任务完成量汇总
```dataview
TABLE
  sum(rows.总任务数) as "总任务数",
  sum(rows.已完成) as "已完成",
  sum(rows.待完成) as "待完成",
  sum(rows.其他状态) as "其他状态"
FROM "500 Journal/540 Daily"
WHERE file.day AND dateformat(file.day, "yyyy") = string(date(now).year)
FLATTEN length(file.tasks) as 总任务数
FLATTEN length(filter(file.tasks, (t) => t.completed)) as 已完成
FLATTEN length(filter(file.tasks, (t) => !t.completed and t.status = " ")) as 待完成
FLATTEN length(filter(file.tasks, (t) => !t.completed and t.status != " ")) as 其他状态
GROUP BY dateformat(file.day, "yyyy-MM") as Month
SORT Month ASC
```
